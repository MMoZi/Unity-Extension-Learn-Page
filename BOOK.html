
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>自定义Menu菜单 · Unity-Extension-Learn-Book</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="MMoZi">
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-prism/prism-solarizedlight.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="BOOK.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    前言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="BOOK.html">
            
                <a href="BOOK.html#自定义Menu菜单">
            
                    
                    自定义Menu菜单
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="BOOK.html">
            
                <a href="BOOK.html#ContextMenu特性">
            
                    
                    MenuItem 特性
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="BOOK.html">
            
                <a href="BOOK.html#ItemName路径与快捷键">
            
                    
                    ItemName  路径与快捷键
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="BOOK.html">
            
                <a href="BOOK.html#IsValidateFunction校验函数">
            
                    
                    IsValidateFunction 校验函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="BOOK.html">
            
                <a href="BOOK.html#Priority优先级">
            
                    
                    Priority 优先级
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.4" data-path="BOOK.html">
            
                <a href="BOOK.html#特殊路径">
            
                    
                    特殊路径
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="BOOK.html">
            
                <a href="BOOK.html#AddComponent">
            
                    
                    AddComponent 特性
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="BOOK.html">
            
                <a href="BOOK.html#MenuName路径">
            
                    
                    MenuName 路径
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="BOOK.html">
            
                <a href="BOOK.html#order顺序">
            
                    
                    order 顺序
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="BOOK.html">
            
                <a href="BOOK.html#ContextMenu特性">
            
                    
                    ContextMenu 特性
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="BOOK.html">
            
                <a href="BOOK.html#自定义Inspector面板">
            
                    
                    自定义Inspector面板
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="BOOK.html">
            
                <a href="BOOK.html#HelpURL特性">
            
                    
                    HelpURL 特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="BOOK.html">
            
                <a href="BOOK.html#Range">
            
                    
                    Range Tooltip Header Space Multiline  特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="BOOK.html">
            
                <a href="BOOK.html#CanEditMultipleObjects">
            
                    
                    CustomEditor 特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="BOOK.html">
            
                <a href="BOOK.html#Priority优先级">
            
                    
                    CanEditMultipleObjects 特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="BOOK.html">
            
                <a href="BOOK.html#GUI与EditorGUI">
            
                    
                    GUI 与 EditorGUI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="BOOK.html">
            
                <a href="BOOK.html#继承Editor">
            
                    
                    继承 Editor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="BOOK.html">
            
                <a href="BOOK.html#SerializedObject">
            
                    
                    SerializedObject 与 SerializedProperty
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="BOOK.html">
            
                <a href="BOOK.html#PropertyDrawer">
            
                    
                    继承 PropertyDrawer 处理序列化类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="BOOK.html">
            
                <a href="BOOK.html#HeaderGUI">
            
                    
                    修改 HeaderGUI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="BOOK.html">
            
                <a href="BOOK.html#Same">
            
                    
                    多个程序对同一面板自定义的执行顺序
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="BOOK.html">
            
                <a href="BOOK.html#自定义Scene面板">
            
                    
                    自定义Scene面板
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="BOOK.html">
            
                <a href="BOOK.html#Handles">
            
                    
                    Handles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="BOOK.html">
            
                <a href="BOOK.html#Gizmos">
            
                    
                    Gizmos
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="BOOK.html">
            
                <a href="BOOK.html#自定义Preview面板">
            
                    
                    自定义Preview面板
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="BOOK.html">
            
                <a href="BOOK.html#Editor与ObjectPreview">
            
                    
                    Editor与ObjectPreview
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="BOOK.html">
            
                <a href="BOOK.html#自定义Attribute特性">
            
                    
                    自定义Attribute特性
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="BOOK.html">
            
                <a href="BOOK.html#PropertyDrawer">
            
                    
                    PropertyDrawer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="BOOK.html">
            
                <a href="BOOK.html#DecoratorDrawer">
            
                    
                    DecoratorDrawer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="BOOK.html">
            
                <a href="BOOK.html#自定义窗口EditorWindow">
            
                    
                    自定义窗口 EditorWindow
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="BOOK.html">
            
                <a href="BOOK.html#注意Event事件">
            
                    
                    注意Event事件
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >自定义Menu菜单</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="unity-&#x7F16;&#x8F91;&#x5668;&#x6269;&#x5C55;">Unity &#x7F16;&#x8F91;&#x5668;&#x6269;&#x5C55;<div id="Unity&#x7F16;&#x8F91;&#x5668;&#x6269;&#x5C55;"></div></h1>
<h2 id="&#x81EA;&#x5B9A;&#x4E49;menu&#x83DC;&#x5355;">&#x81EA;&#x5B9A;&#x4E49;Menu&#x83DC;&#x5355;<div id="&#x81EA;&#x5B9A;&#x4E49;Menu&#x83DC;&#x5355;"></div></h2>
<h3 id="menuitem-&#x7279;&#x6027;">MenuItem &#x7279;&#x6027;<div id="MenuItem&#x7279;&#x6027;"></div></h3>
<p>MenuItem &#x5C5E;&#x6027;&#x53EF;&#x4EE5;&#x5411;&#x4E3B;&#x83DC;&#x5355;&#x548C;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x6DFB;&#x52A0;&#x83DC;&#x5355;&#x9009;&#x9879;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token function">MenuItem</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> itemName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token function">MenuItem</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> itemName<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">bool</span></span> isValidateFunction<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token function">MenuItem</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> itemName<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">bool</span></span> isValidateFunction<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> priority<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li>itemName: &#x8DEF;&#x5F84;&#x52A0;&#x5FEB;&#x6377;&#x952E; <code>&quot;GameObject/Do Something&quot; + &quot; &quot; + &quot;$hotkey&quot;</code></li>
<li>isValidateFunction: &#x5982;&#x679C;&#x4E3A;true&#xFF0C;&#x5219;&#x65B9;&#x6CD5;&#x4E3A;&#x6821;&#x9A8C;&#x51FD;&#x6570;&#xFF0C;&#x62E5;&#x6709;bool&#x7C7B;&#x578B;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x3002;&#x8FD4;&#x56DE;&#x7684;bool&#x503C;&#x5C06;&#x51B3;&#x5B9A;&#x76F8;&#x540C;&#x8DEF;&#x5F84;&#x7684;&#x83DC;&#x5355;&#x662F;&#x5426;&#x5904;&#x4E8E;&#x6FC0;&#x6D3B;&#x72B6;&#x6001;&#x3002;</li>
<li>priority:&#x6743;&#x91CD;&#x6392;&#x5E8F;&#xFF0C;&#x6743;&#x91CD;&#x8D8A;&#x4F4E;&#x8D8A;&#x9760;&#x524D;&#xFF0C;&#x9ED8;&#x8BA4;1000&#x3002;</li>
</ul>
<h4 id="itemname--&#x8DEF;&#x5F84;&#x4E0E;&#x5FEB;&#x6377;&#x952E;">ItemName  &#x8DEF;&#x5F84;&#x4E0E;&#x5FEB;&#x6377;&#x952E;<div id="ItemName&#x8DEF;&#x5F84;&#x4E0E;&#x5FEB;&#x6377;&#x952E;"></div></h4>
<p>&#x5728;itemName&#x7684;hotkey&#x683C;&#x5F0F;&#x4E2D;&#x6709;&#x4EE5;&#x4E0B;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;&#xFF1A;</p>
<ul>
<li><p><code>%</code> = <code>&quot;ctrl +&quot;</code> </p>
</li>
<li><p><code>#</code> = <code>&quot;shift +&quot;</code></p>
</li>
<li><p><code>&amp;</code> = <code>&quot;alt +&quot;</code></p>
</li>
<li><p><code>_</code> &#xFF1A;&#x5982;&#x679C;&#x4E0D;&#x9700;&#x8981;&#x4EE5;&#x4E0A;&#x51E0;&#x4E2A;&#x7279;&#x6B8A;&#x7684;&#x4FEE;&#x6539;&#x952E;&#x7EC4;&#x5408;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x5728;&#x4E0B;&#x5212;&#x7EBF;&#x4E4B;&#x540E;&#x7ED9;&#x51FA;&#x8BE5;&#x952E;&#x3002;&#x540E;&#x9762;&#x53EF;&#x63A5;26&#x4E2A;&#x5B57;&#x6BCD;&#x548C; LEFT, RIGHT, UP, DOWN, F1 .. F12, HOME, END, PGUP, PGDN.&#x7B49;&#x7279;&#x6B8A;&#x952E;&#x3002;</p>
</li>
</ul>
<p>&#x4F8B;&#x5982;&#xFF1A;<code>&quot;%t&quot;</code> &#x5728;&#x7F16;&#x8F91;&#x5668;&#x4E2D;&#x663E;&#x793A;&#x4E3A; <code>Ctrl+T</code>&#x3001;<code>&quot;_t%&quot;</code> &#x5728;&#x7F16;&#x8F91;&#x5668;&#x4E2D;&#x663E;&#x793A;&#x4E3A; <code>TCtrl+</code>&#xFF08;&#x5F53;&#x7136;&#x662F;&#x65E0;&#x6548;&#x7684;&#xFF09;&#x3002;</p>
<p>&#x8BBE;&#x7F6E;&#x5FEB;&#x6377;&#x952E;&#xFF0C;&#x5177;&#x4F53;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre class="language-"><code class="lang-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MenuItem</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;MenuItem/02-Shortcuts/Alt_Shift_t &amp;#t&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Shortcuts_Shift_Alt_T</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;Alt Shift t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MenuItem</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;MenuItem/02-Shortcuts/Alpha_G _G&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Shortcuts_Alpha_G</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// &#x89E6;&#x53D1;&#x9700;&#x8981; Fn</span>
<span class="token punctuation">[</span><span class="token function">MenuItem</span><span class="token punctuation">(</span><span class="token string">&quot;MenuItem/02-Shortcuts/LeftArrow _LEFT&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Shortcuts_LeftArrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;LeftArrow&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="img/MenuItem_Shortcuts.png" alt="MenuItem_Shortcuts"></p>
<h4 id="isvalidatefunction-&#x6821;&#x9A8C;&#x51FD;&#x6570;">IsValidateFunction &#x6821;&#x9A8C;&#x51FD;&#x6570;<div id="IsValidateFunction&#x6821;&#x9A8C;&#x51FD;&#x6570;"></div></h4>
<p>&#x5BF9;&#x83DC;&#x5355;&#x662F;&#x5426;&#x6FC0;&#x6D3B;&#x8FDB;&#x884C;&#x6821;&#x9A8C;&#xFF0C;&#x5177;&#x4F53;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre class="language-"><code class="lang-csharp"><span class="token comment">// &#x5982;&#x679C;&#x6CA1;&#x6709;&#x9009;&#x62E9;Object&#xFF0C;&#x8BE5;&#x9879;&#x5C06;&#x662F;&#x7981;&#x7528;&#x7684;&#x3002;</span>
<span class="token punctuation">[</span><span class="token function">MenuItem</span><span class="token punctuation">(</span><span class="token string">&quot;MenuItem/03-Selected/SelectedObject&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SelectedObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;Selected Active Object is &quot;</span> <span class="token operator">+</span> Selection<span class="token punctuation">.</span>activeObject<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// &#x9A8C;&#x8BC1;&#x6709;&#x6CA1;&#x6709;&#x9009;&#x62E9;Object.&#x6CE8;&#x610F;&#x8DEF;&#x5F84;&#x5FC5;&#x987B;&#x6307;&#x5411;&#x4E00;&#x81F4;&#x3002;</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MenuItem</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;MenuItem/03-Selected/SelectedObject&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">ValidateSelectedObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> Selection<span class="token punctuation">.</span>activeObject <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="img/MenuItem_Validate.png" alt="MenuItem_Validate"></p>
<h4 id="priority-&#x4F18;&#x5148;&#x7EA7;">Priority &#x4F18;&#x5148;&#x7EA7;<div id="Priority&#x4F18;&#x5148;&#x7EA7;"></div></h4>
<p>&#x5BF9;&#x83DC;&#x5355;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF0C;&#x5177;&#x4F53;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre class="language-"><code class="lang-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MenuItem</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;MenuItem/04-Sequence/C_Priority1&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Priority1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;Priority1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MenuItem</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;MenuItem/04-Sequence/B_Priority2&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Priority2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;Priority2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MenuItem</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;MenuItem/04-Sequence/A_Priority3&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Priority3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;Priority3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="img/MenuItem_Squence.png" alt="MenuItemSquence"></p>
<p>&#x5173;&#x4E8E;&#x4F18;&#x5148;&#x7EA7;&#xFF1A;</p>
<blockquote>
<p>Also note that in order for a menu item in &quot;GameObject/&quot; to be propagated to the hierarchy Create dropdown and hierarchy context menu, it must be grouped with the other GameObject creation menu items. This can be achieved by setting its priority to 10 (see example below). Note that for legacy purposes MenuItems in &quot;GameObject/Create Other&quot; with no explicit priority set will receive a priority of 10 instead of the default 1000 - we encourage using a more descriptive category name than &quot;Create Other&quot; and explicitly setting the priority to 10.</p>
<p><a href="https://docs.unity.cn/2020.2/Documentation/ScriptReference/MenuItem.html" target="_blank">https://docs.unity.cn/2020.2/Documentation/ScriptReference/MenuItem.html</a></p>
<p>a.&#x5206;&#x5272;&#x7EBF;&#xFF0C;&#x5F53;&#x76F8;&#x90BB;&#x7684;&#x4E24;&#x4E2A;&#x83DC;&#x5355;&#x9879;&#x4F18;&#x5148;&#x7EA7;&#x76F8;&#x5DEE;&gt;10&#x65F6;&#xFF0C;&#x8868;&#x793A;&#x4E0D;&#x540C;&#x7EC4;&#xFF0C;&#x8FD9;&#x65F6;&#x4F1A;&#x6709;&#x5206;&#x5272;&#x7EBF;</p>
<p>b.&#x76F8;&#x540C;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5148;&#x5B9A;&#x4E49;&#x7684;&#x5728;&#x524D;&#x9762;&#xFF0C;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x8986;&#x76D6;&#x7684;&#x60C5;&#x51B5;</p>
<p>c.&#x76F8;&#x540C;&#x83DC;&#x5355;&#x8DEF;&#x5F84;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x540E;&#x5B9A;&#x4E49;&#x7684;&#x4F1A;&#x8986;&#x76D6;&#x5148;&#x5B9A;&#x4E49;&#x7684;&#x3002;unity&#x5185;&#x7F6E;&#x7684;&#x83DC;&#x5355;&#x9879;&#x540C;&#x6837;&#x4E5F;&#x53EF;&#x4EE5;&#x88AB;&#x8986;&#x76D6;</p>
<p>d.GameObject/&#x4E0B;&#x7684;&#x83DC;&#x5355;&#x9879;&#x4F18;&#x5148;&#x7EA7;&lt;50&#x7684;&#x624D;&#x4F1A;&#x663E;&#x793A;&#x5728;Hierarchy&#x89C6;&#x56FE;&#x4E2D;</p>
<p><a href="https://www.cnblogs.com/lyh916/archive/2004/01/13/13061296.html" target="_blank">https://www.cnblogs.com/lyh916/archive/2004/01/13/13061296.html</a></p>
</blockquote>
<p>&#x8FD9;&#x91CC;&#x8865;&#x5145;&#x4E00;&#x70B9;&#xFF0C;&#x7236;&#x7EA7;&#x9009;&#x9879;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x53D6;&#x51B3;&#x4E8E;&#x5B50;&#x7EA7;&#x9009;&#x9879;&#x4E2D;&#x7684;&#x6700;&#x5C0F;&#x4F18;&#x5148;&#x7EA7;&#x3002;&#x4EE5;&#x4E0B;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;Sub&#x7236;&#x7EA7;&#x9009;&#x9879;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MenuItem</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;MenuItem/04-Sequence/Sub/DefaultPriority&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DefaultPriority</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;DefaultPriority&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MenuItem</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;MenuItem/04-Sequence/Sub/Priority7&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Priority9</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;Priority7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MenuItem</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;MenuItem/04-Sequence/Sub/Priority11&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Priority11</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;Priority11&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img src="img/MenuItem_SeqencePriority.png" alt="MenuItem_SeqencePriority"></p>
<p>&#x5982;&#x679C;&#x53D1;&#x73B0;&#x4FEE;&#x6539;&#x4F18;&#x5148;&#x7EA7;&#x7EA7;&#x53D1;&#x73B0;&#x65E0;&#x6548;&#xFF0C;&#x9700;&#x8981;&#x91CD;&#x542F;&#x7F16;&#x8F91;&#x5668;&#xFF0C;&#x6216;&#x8005;&#x6CE8;&#x91CA;&#x6389;&#x6240;&#x6709;&#x76F8;&#x5173;&#x4EE3;&#x7801;&#xFF0C;Unity&#x7F16;&#x8BD1;&#x540E;&#x518D;&#x53D6;&#x6D88;&#x6CE8;&#x91CA;&#x3002;</p>
<h4 id="&#x7279;&#x6B8A;&#x8DEF;&#x5F84;">&#x7279;&#x6B8A;&#x8DEF;&#x5F84;<div id="&#x7279;&#x6B8A;&#x8DEF;&#x5F84;"></div></h4>
<ul>
<li>CONTEXT&#xFF1A;&#x4E3A;&#x7EC4;&#x4EF6;&#x6DFB;&#x52A0;&#x83DC;&#x5355;&#x9879;</li>
<li>GameObject&#xFF1A;&#x5BF9;&#x5E94;&#x9876;&#x90E8;&#x83DC;&#x5355;GameObject&#xFF0C;&#x4EE5;&#x53CA;Hierarchy&#x89C6;&#x56FE;&#x53F3;&#x51FB;&#x7A97;&#x53E3;</li>
<li>Assets&#xFF1A;&#x5BF9;&#x5E94;&#x9876;&#x90E8;&#x83DC;&#x5355;Assets</li>
<li>Component&#xFF1A;&#x5BF9;&#x5E94;&#x9876;&#x90E8;Component&#x83DC;&#x5355;&#xFF0C;&#x5BF9;&#x5E94;Inspection&#x89C6;&#x56FE;&#x7684;AddComponent&#x7A97;&#x53E3;</li>
<li>File&#x3001;Edit&#x3001;Window&#x3001;Help&#x5747;&#x4E0E;&#x9876;&#x90E8;&#x83DC;&#x5355;&#x5BF9;&#x5E94;</li>
</ul>
<h3 id="addcomponent-&#x7279;&#x6027;">AddComponent &#x7279;&#x6027;<div id="AddComponent"></div></h3>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token function">AddComponentMenu</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> menuName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token function">AddComponentMenu</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> menuName<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> order<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="menuname-&#x8DEF;&#x5F84;">MenuName &#x8DEF;&#x5F84;<div id="MenuName&#x8DEF;&#x5F84;"></div></h4>
<p>&#x6DFB;&#x52A0;&#x4E3B;&#x952E;&#x529F;&#x80FD;&#x83DC;&#x5355;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x8DEF;&#x5F84;&#x81EA;&#x52A8;&#x653E;&#x5728;Component&#x83DC;&#x5355;&#x4E0B;&#x9762;&#x3002;</p>
<h4 id="order-&#x987A;&#x5E8F;">order &#x987A;&#x5E8F;<div id="order&#x987A;&#x5E8F;"></div></h4>
<p>&#x4E0E;MenuItem&#x4E2D;&#x7684;Priority&#x7C7B;&#x4F3C;&#xFF0C;&#x4E0D;&#x8FC7; order &#x9ED8;&#x8BA4;&#x662F;&#x4ECE;20&#x5F00;&#x59CB;&#x8BA1;&#x7B97;&#xFF0C;&#x5373; order &#x4E3A; 1 &#x65F6;&#xFF0C;priority&#x5B9E;&#x9645;&#x503C;&#x4E3A;21&#x3002;</p>
<p><img src="img/AddComponent_Order.png" alt="AddComponent_Order"></p>
<pre class="language-"><code class="lang-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">AddComponentMenu</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;MyCategory/AddComponent Default Order&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AddComponentLearn</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre>
<h3 id="contextmenu-&#x7279;&#x6027;">ContextMenu &#x7279;&#x6027;<div id="ContextMenu&#x7279;&#x6027;"></div></h3>
<p>ContextMenu &#x5C5E;&#x6027;&#x5141;&#x8BB8;&#x60A8;&#x5411;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x6DFB;&#x52A0;&#x547D;&#x4EE4;&#xFF0C;&#x51FD;&#x6570;&#x5FC5;&#x987B;&#x662F;&#x975E;&#x9759;&#x6001;&#x7684;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token function">ContextMenu</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> itemName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token function">ContextMenu</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> itemName<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">bool</span></span> isValidateFunction<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token function">ContextMenu</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> itemName<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">bool</span></span> isValidateFunction<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> priority<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>itemName &#x6307;&#x660E;&#x8DEF;&#x5F84;&#xFF0C;isValidateFunction &#x548C; priority &#x5747;&#x4E0E; menuItem &#x4E2D;&#x7684;&#x4F5C;&#x7528;&#x76F8;&#x540C;&#x3002;</p>
<p>&#x7279;&#x522B;&#x7684;&#x662F; ContextMenu &#x7684;&#x9ED8;&#x8BA4;&#x4F18;&#x5148;&#x7EA7;&#x4E3A; 1000000</p>
<pre class="language-"><code class="lang-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ContextMenu</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;ToString&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>num <span class="token operator">+</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">+</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img src="img/ContextMenu_Priority.png" alt="ContextMenu_Priority"></p>
<h2 id="&#x81EA;&#x5B9A;&#x4E49;inspector&#x9762;&#x677F;">&#x81EA;&#x5B9A;&#x4E49;Inspector&#x9762;&#x677F;<div id="&#x81EA;&#x5B9A;&#x4E49;Inspector&#x9762;&#x677F;"></div></h2>
<h3 id="helpurl-&#x7279;&#x6027;">HelpURL &#x7279;&#x6027;<div id="HelpURL&#x7279;&#x6027;"></div></h3>
<p>&#x6DFB;&#x52A0;&#x811A;&#x672C;&#x8BF4;&#x660E;&#x7684;&#x94FE;&#x63A5;</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token function">HelpURLAttribute</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre class="language-"><code class="lang-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HelpURL</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;https://www.baidu.com&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ComponentTest</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre>
<p><img src="img/HelpURL.png" alt="HelpURL"></p>
<h3 id="range-tooltip-header-space-multiline--&#x7279;&#x6027;">Range Tooltip Header Space Multiline  &#x7279;&#x6027;<div id="Range"></div></h3>
<p>&#x5206;&#x522B;&#x5BF9;&#x5E94;&#x8303;&#x56F4;&#x3001;&#x63D0;&#x793A;&#x3001;&#x6807;&#x9898;&#x3001;&#x7A7A;&#x767D;&#x3001;&#x591A;&#x884C;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ComponentTest</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Range</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> num<span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Multiline</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">string</span></span> str<span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Tooltip</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;flag&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> flag<span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Header</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Space&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> space1<span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Space</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> space2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img src="img/Multi.png" alt="Multi"></p>
<h3 id="customeditor-&#x7279;&#x6027;">CustomEditor &#x7279;&#x6027;<div id="CustomEditor"></div></h3>
<p>CustomEditor &#x5C5E;&#x6027;&#x901A;&#x77E5; Unity &#x5B83;&#x662F;&#x4F5C;&#x4E3A;&#x54EA;&#x4E2A;&#x811A;&#x672C;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x7F16;&#x8F91;&#x5668;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token function">CustomEditor</span><span class="token punctuation">(</span><span class="token class-name">Type</span> inspectedType<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token function">CustomEditor</span><span class="token punctuation">(</span><span class="token class-name">Type</span> inspectedType<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">bool</span></span> editorForChildClasses<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>inspectedType &#x6307;&#x793A;&#x76EE;&#x6807;&#x811A;&#x672C;&#xFF0C;editorForChildClasses &#x6307;&#x793A;&#x662F;&#x5426;&#x5E94;&#x7528;&#x4E8E;&#x5B50;&#x7C7B;&#x3002;</p>
<h3 id="caneditmultipleobjects-&#x7279;&#x6027;">CanEditMultipleObjects &#x7279;&#x6027;<div id="CanEditMultipleObjects"></div></h3>
<p>CanEditMultipleObjects &#x5C5E;&#x6027;&#x544A;&#x8BC9; Unity&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x7F16;&#x8F91;&#x5668;&#x9009;&#x62E9;&#x591A;&#x4E2A;&#x5BF9;&#x8C61;&#x5E76;&#x540C;&#x65F6;&#x66F4;&#x6539;&#x5B83;&#x4EEC;&#x3002;</p>
<h3 id="gui-&#x4E0E;-editorgui">GUI &#x4E0E; EditorGUI<div id="GUI&#x4E0E;EditorGUI"></div></h3>
<p>GUI &#x6765;&#x81EA;UnityEngine&#x547D;&#x540D;&#x7A7A;&#x95F4;&#xFF0C;&#x8FD9;&#x91CC;&#x6307;&#x7684;&#x662F;&#x4E00;&#x79CD;&#x5373;&#x65F6;&#x6A21;&#x5F0F;GUI&#x7CFB;&#x7EDF;&#xFF08;IMGUI&#xFF09;&#xFF0C;&#x4ED6;&#x7531;<code>OnGUI()</code>&#x51FD;&#x6570;&#x8FDB;&#x884C;&#x9A71;&#x52A8;&#xFF0C;IMGUI&#x901A;&#x5E38;&#x7528;&#x4E8E;&#xFF1A;</p>
<ul>
<li>&#x6784;&#x5EFA;&#x8C03;&#x8BD5;&#x5DE5;&#x5177;</li>
<li>&#x81EA;&#x5B9A;&#x4E49;inspector&#x9762;&#x677F;</li>
<li>&#x6269;&#x5C55;&#x7F16;&#x8F91;&#x5668;</li>
</ul>
<p>IMGUI&#x901A;&#x5E38;&#x4E0D;&#x4F1A;&#x7528;&#x4E8E;&#x6E38;&#x620F;&#x5185;&#x7684;&#x7528;&#x6237;&#x754C;&#x9762;&#xFF08;&#x6E38;&#x620F;&#x5185;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7684;&#x662F;UGUI&#x7B49;&#xFF09;&#x3002;</p>
<p>IMGUI&#x5728;<code>OnGUI()</code>&#x51FD;&#x6570;&#x4E2D;&#x8FDB;&#x884C;&#x9A71;&#x52A8;&#x3002;&#x5728;&#x7EE7;&#x627F;&#x81EA;MonoBehaviour&#x7684;&#x7C7B;&#x4E2D;&#xFF0C;&#x5177;&#x4F53;&#x751F;&#x6210;&#x7684;&#x754C;&#x9762;&#x4F1A;&#x5728;Game&#x7A97;&#x53E3;&#x4E2D;&#x8FDB;&#x884C;&#x4F53;&#x73B0;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IMGUITest</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        GUILayout<span class="token punctuation">.</span><span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img src="img/IMGUI.png" alt="IMGUI"></p>
<p>&#x4EE5;&#x4E0A;&#x662F;&#x901A;&#x8FC7;<code>GUILayout</code>&#x521B;&#x5EFA;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>GUI</code>&#x8FDB;&#x884C;&#x521B;&#x5EFA;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IMGUITest</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span> 
    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        GUI<span class="token punctuation">.</span><span class="token function">Button</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Rect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img src="img/IMGUI_GUI.png" alt="IMGUI_GUI"></p>
<p><code>GUI</code> &#x548C; <code>GUILayout</code>&#x7684;&#x4E0D;&#x540C;&#x4E4B;&#x5904;&#x5728;&#x4E8E;&#xFF0C;&#x524D;&#x8005;&#x662F;&#x56FA;&#x5B9A;&#x5E03;&#x5C40;&#xFF08;Fixed Layout&#xFF09;&#xFF0C;&#x800C;&#x540E;&#x8005;&#x662F;&#x81EA;&#x52A8;&#x5E03;&#x5C40;&#xFF08;Automatic Layout&#xFF09;&#x3002;</p>
<blockquote>
<p>Fixed Layout makes sense to use when you have a pre-designed interface to work from. Automatic Layout makes sense to use when you don&#x2019;t know how many elements you need up front, or don&#x2019;t want to worry about hand-positioning each Control. For example, if you are creating a number of different buttons based on Save Game files, you don&#x2019;t know exactly how many buttons will be drawn. In this case Automatic Layout might make more sense. It is really dependent on the design of your game and how you want to present your interface.</p>
<p><a href="https://docs.unity.cn/2020.2/Documentation/Manual/gui-Layout.html" target="_blank">https://docs.unity.cn/2020.2/Documentation/Manual/gui-Layout.html</a></p>
</blockquote>
<p>&#x56FA;&#x5B9A;&#x5E03;&#x5C40;&#x5728;&#x4F7F;&#x7528;&#x65F6;&#x9700;&#x8981;&#x65F6;&#x523B;&#x6307;&#x5B9A;UI&#x8986;&#x76D6;&#x7684;&#x4F4D;&#x7F6E;&#x4E0E;&#x8303;&#x56F4;&#xFF08;&#x901A;&#x8FC7; <code>Rect</code>&#x51FD;&#x6570;&#xFF09;&#xFF0C;&#x800C;&#x81EA;&#x52A8;&#x5E03;&#x5C40;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6C34;&#x5E73;&#x6392;&#x5217;&#x548C;&#x5782;&#x76F4;&#x6392;&#x5217;&#x8FDB;&#x884C;&#x63A7;&#x5236;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IMGUITest</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span> 
    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        GUILayout<span class="token punctuation">.</span><span class="token function">BeginHorizontal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        GUILayout<span class="token punctuation">.</span><span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">&quot;Unity&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        GUILayout<span class="token punctuation">.</span><span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">&quot;Editor&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        GUILayout<span class="token punctuation">.</span><span class="token function">EndHorizontal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img src="img/IMGUI_Layout.png" alt="IMGUI_Layout"></p>
<p>&#x518D;&#x6765;&#x8BF4;&#x8BF4;<code>EditorGUI</code>&#xFF0C;&#x5B83;&#x4E0E;<code>GUI</code>&#x5728;&#x67D0;&#x4E9B;&#x65B9;&#x9762;&#x4E0A;&#x5341;&#x5206;&#x7C7B;&#x4F3C;&#x3002;<code>EditorGUI</code>&#x6765;&#x81EA;&#x4E8E;&#x547D;&#x540D;&#x7A7A;&#x95F4;UnityEditor&#xFF0C;&#x5B83;&#x5E38;&#x5E38;&#x88AB;&#x7528;&#x4E8E;&#x81EA;&#x5B9A;&#x4E49;inspect&#x9762;&#x677F;&#xFF0C;&#x4E3B;&#x8981;&#x5728;<code>OnInspectorGUI()</code>&#x51FD;&#x6570;&#x4E2D;&#x8FDB;&#x884C;&#x9A71;&#x52A8;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token comment">// MyPlayer.cs</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyPlayer</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> armor <span class="token operator">=</span> <span class="token number">75</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> damage <span class="token operator">=</span> <span class="token number">25</span> 
    <span class="token keyword">public</span> <span class="token class-name">GameObject</span> gun<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
<span class="token comment">// MyPlayerEditor.cs</span>
<span class="token punctuation">[</span><span class="token function">CustomEditor</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MyPlayer</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyPlayerEditor</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Editor</span></span>
<span class="token punctuation">{</span> 
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnInspectorGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// target&#x6765;&#x81EA;&#x7236;&#x7C7B;Editor&#xFF0C;&#x6307;&#x660E;&#x5F53;&#x524D;&#x64CD;&#x4F5C;&#x7684;&#x5BF9;&#x8C61;</span>
        <span class="token class-name">MyPlayer</span> mp <span class="token operator">=</span> <span class="token punctuation">(</span>MyPlayer<span class="token punctuation">)</span>target<span class="token punctuation">;</span> 
        mp<span class="token punctuation">.</span>damage <span class="token operator">=</span> EditorGUILayout<span class="token punctuation">.</span><span class="token function">IntField</span><span class="token punctuation">(</span><span class="token string">&quot;Damage&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mp<span class="token punctuation">.</span>armor <span class="token operator">=</span> EditorGUILayout<span class="token punctuation">.</span><span class="token function">IntSlider</span><span class="token punctuation">(</span><span class="token string">&quot;Armor&quot;</span><span class="token punctuation">,</span> mp<span class="token punctuation">.</span>armor<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        serializedObject<span class="token punctuation">.</span><span class="token function">ApplyModifiedProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img src="img/EditorGUI.png" alt="EditorGUI"></p>
<p>&#x5728;&#x5E03;&#x5C40;&#x65B9;&#x9762;&#x4E0A;&#xFF0C;&#x540C;&#x6837;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x56FA;&#x5B9A;&#x5E03;&#x5C40;<code>EditorGUI</code>&#x548C;&#x81EA;&#x52A8;&#x5E03;&#x5C40;<code>EditorGUILayout</code>&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnInspectorGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">MyPlayer</span> mp <span class="token operator">=</span> <span class="token punctuation">(</span>MyPlayer<span class="token punctuation">)</span>target<span class="token punctuation">;</span>
    <span class="token comment">// &#x56FA;&#x5B9A;&#x5E03;&#x5C40;</span>
    EditorGUI<span class="token punctuation">.</span><span class="token function">IntField</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Rect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GUIContent</span><span class="token punctuation">(</span><span class="token string">&quot;HERE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// &#x81EA;&#x5B9A;&#x4E49;&#x5E03;&#x5C40;</span>
    EditorGUILayout<span class="token punctuation">.</span><span class="token function">BeginHorizontal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mp<span class="token punctuation">.</span>damage <span class="token operator">=</span> EditorGUILayout<span class="token punctuation">.</span><span class="token function">IntField</span><span class="token punctuation">(</span><span class="token string">&quot;Damage&quot;</span><span class="token punctuation">,</span> mp<span class="token punctuation">.</span>damage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    mp<span class="token punctuation">.</span>armor <span class="token operator">=</span> EditorGUILayout<span class="token punctuation">.</span><span class="token function">IntSlider</span><span class="token punctuation">(</span><span class="token string">&quot;Armor&quot;</span><span class="token punctuation">,</span> mp<span class="token punctuation">.</span>armor<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    EditorGUILayout<span class="token punctuation">.</span><span class="token function">EndHorizontal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre>
<p><img src="img/EditorGUIAndLayout.png" alt="EditorGUIAndLayout"></p>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x56FA;&#x5B9A;&#x5E03;&#x5C40;&#x548C;&#x81EA;&#x5B9A;&#x4E49;&#x5E03;&#x5C40;&#x4E92;&#x4E0D;&#x5F71;&#x54CD;&#xFF0C;&#x5B83;&#x4EEC;&#x91CD;&#x5408;&#x5728;&#x4E86;&#x4E00;&#x8D77;&#x3002;</p>
<p><code>GUI</code>&#x548C;<code>EditorGUI</code>&#x4E24;&#x4E2A;&#x5728;&#x81EA;&#x5B9A;&#x4E49;inspector&#x9762;&#x677F;&#x4E0A;&#x7ECF;&#x5E38;&#x642D;&#x914D;&#x4F7F;&#x7528;&#x3002;&#x5728;&#x4F7F;&#x7528;&#x4E0A;&#xFF0C;<code>EditorGUI</code> &#x5E38;&#x5E38;&#x4E0E;&#x76EE;&#x6807;&#x811A;&#x672C;&#xFF08;target&#xFF09;&#x7684;&#x5C5E;&#x6027;&#x7ED1;&#x5B9A;&#x4F7F;&#x7528;&#xFF0C;&#x5728;&#x529F;&#x80FD;&#x4E0A;&#xFF0C;<code>GUI</code>&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;<code>EditorGUI</code>&#x6CA1;&#x6709;&#x7684;&#x6309;&#x94AE;&#x7B49;&#x529F;&#x80FD;&#x3002;</p>
<p>&#x4E24;&#x8005;&#x7684;&#x5E03;&#x5C40;&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x4E92;&#x76F8;&#x5D4C;&#x5957;&#x4F7F;&#x7528;&#xFF1A;</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnInspectorGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">MyPlayer</span> mp <span class="token operator">=</span> <span class="token punctuation">(</span>MyPlayer<span class="token punctuation">)</span>target<span class="token punctuation">;</span> 
    GUILayout<span class="token punctuation">.</span><span class="token function">BeginHorizontal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        EditorGUILayout<span class="token punctuation">.</span><span class="token function">BeginVertical</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        mp<span class="token punctuation">.</span>damage <span class="token operator">=</span> EditorGUILayout<span class="token punctuation">.</span><span class="token function">IntField</span><span class="token punctuation">(</span><span class="token string">&quot;A Damage&quot;</span><span class="token punctuation">,</span> mp<span class="token punctuation">.</span>damage<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mp<span class="token punctuation">.</span>armor <span class="token operator">=</span> EditorGUILayout<span class="token punctuation">.</span><span class="token function">IntField</span><span class="token punctuation">(</span><span class="token string">&quot;A Armor&quot;</span><span class="token punctuation">,</span> mp<span class="token punctuation">.</span>armor<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        EditorGUILayout<span class="token punctuation">.</span><span class="token function">EndVertical</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        GUILayout<span class="token punctuation">.</span><span class="token function">BeginVertical</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        mp<span class="token punctuation">.</span>damage <span class="token operator">=</span> EditorGUILayout<span class="token punctuation">.</span><span class="token function">IntField</span><span class="token punctuation">(</span><span class="token string">&quot;B Damage&quot;</span><span class="token punctuation">,</span> mp<span class="token punctuation">.</span>damage<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mp<span class="token punctuation">.</span>armor <span class="token operator">=</span> EditorGUILayout<span class="token punctuation">.</span><span class="token function">IntField</span><span class="token punctuation">(</span><span class="token string">&quot;B Armor&quot;</span><span class="token punctuation">,</span> mp<span class="token punctuation">.</span>armor<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        GUILayout<span class="token punctuation">.</span><span class="token function">EndVertical</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    GUILayout<span class="token punctuation">.</span><span class="token function">EndHorizontal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img src="img/GUI_EditorGUI.png" alt="GUI_EditorGUI"></p>
<p>&#x751A;&#x81F3;&#x4EA4;&#x53C9;&#x4F7F;&#x7528;&#x4E5F;&#x53EF;&#x4EE5;&#x8FBE;&#x5230;&#x76F8;&#x540C;&#x7684;&#x6548;&#x679C;&#xFF1A;</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnInspectorGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">MyPlayer</span> mp <span class="token operator">=</span> <span class="token punctuation">(</span>MyPlayer<span class="token punctuation">)</span>target<span class="token punctuation">;</span> 
    GUILayout<span class="token punctuation">.</span><span class="token function">BeginHorizontal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        GUILayout<span class="token punctuation">.</span><span class="token function">BeginVertical</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        mp<span class="token punctuation">.</span>damage <span class="token operator">=</span> EditorGUILayout<span class="token punctuation">.</span><span class="token function">IntField</span><span class="token punctuation">(</span><span class="token string">&quot;A Damage&quot;</span><span class="token punctuation">,</span> mp<span class="token punctuation">.</span>damage<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mp<span class="token punctuation">.</span>armor <span class="token operator">=</span> EditorGUILayout<span class="token punctuation">.</span><span class="token function">IntField</span><span class="token punctuation">(</span><span class="token string">&quot;A Armor&quot;</span><span class="token punctuation">,</span> mp<span class="token punctuation">.</span>armor<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        EditorGUILayout<span class="token punctuation">.</span><span class="token function">EndVertical</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        GUILayout<span class="token punctuation">.</span><span class="token function">BeginVertical</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        mp<span class="token punctuation">.</span>damage <span class="token operator">=</span> EditorGUILayout<span class="token punctuation">.</span><span class="token function">IntField</span><span class="token punctuation">(</span><span class="token string">&quot;B Damage&quot;</span><span class="token punctuation">,</span> mp<span class="token punctuation">.</span>damage<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mp<span class="token punctuation">.</span>armor <span class="token operator">=</span> EditorGUILayout<span class="token punctuation">.</span><span class="token function">IntField</span><span class="token punctuation">(</span><span class="token string">&quot;B Armor&quot;</span><span class="token punctuation">,</span> mp<span class="token punctuation">.</span>armor<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        EditorGUILayout<span class="token punctuation">.</span><span class="token function">EndVertical</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    EditorGUILayout<span class="token punctuation">.</span><span class="token function">EndHorizontal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="&#x7EE7;&#x627F;-editor">&#x7EE7;&#x627F; Editor<div id="&#x7EE7;&#x627F;Editor"></div></h3>
<p>&#x4ECE;Editor&#x6D3E;&#x751F;&#x51FA;&#x6765;&#x7684;&#x5B50;&#x7C7B;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;&#x7F16;&#x8F91;&#x5668;&#x6216;&#x68C0;&#x67E5;&#x5668;&#x3002;</p>
<p><code>OnInspectorGUI()</code> &#xFF1A;&#x5728;&#x6B64;&#x51FD;&#x6570;&#x4E2D;&#x5B9E;&#x73B0;&#x81EA;&#x5B9A;&#x4E49; inspector&#x9762;&#x677F;&#xFF0C;&#x6BCF;&#x5F53;&#x9F20;&#x6807;&#x5728;inspector&#x533A;&#x57DF;&#x89E6;&#x53D1;&#x4E00;&#x6B21;<code>Event</code>&#x5C31;&#x4F1A;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x3002;</p>
<p><code>CreateInspectorGUI()</code>&#xFF1A;&#x5728;&#x6B64;&#x51FD;&#x6570;&#x4E2D;&#x4F7F;&#x7528;UIElement &#x81EA;&#x5B9A;&#x4E49; inspector&#x9762;&#x677F;&#xFF0C;&#x5B9E;&#x73B0;&#x6B64;&#x51FD;&#x6570;&#x4F1A;&#x4F7F;<code>OnInspectorGUI()</code>&#x65E0;&#x6548;&#x3002;</p>
<p><code>OnSceneGUI()</code>&#xFF1A;&#x5728;&#x6B64;&#x51FD;&#x6570;&#x4E2D;&#x81EA;&#x5B9A;&#x4E49;Scene&#x533A;&#x57DF;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x6BCF;&#x5F53;&#x9F20;&#x6807;&#x5728;Scene&#x533A;&#x57DF;&#x89E6;&#x53D1;&#x4E00;&#x6B21; Event &#x5C31;&#x4F1A;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x3002;</p>
<p><code>OnHeaderGUI()</code>&#xFF1A;&#x5728;&#x6B64;&#x51FD;&#x6570;&#x4E2D;&#x4FEE;&#x6539;&#x5934;&#x90E8;GUI</p>
<p><code>OnPreviewGUI()</code> &#x548C; <code>OnInteractivePreviewGUI()</code>&#xFF1A;&#x4E24;&#x8005;&#x4ECE;&#x6E90;&#x7801;&#x4E0A;&#x770B;&#xFF0C;&#x62E5;&#x6709;&#x540C;&#x6837;&#x4F5C;&#x7528;&#xFF0C;&#x5747;&#x7528;&#x4E8E;&#x4FEE;&#x6539;Preview&#x7A97;&#x53E3;&#x3002;</p>
<p>&#x6267;&#x884C;&#x987A;&#x5E8F;&#xFF1A;</p>
<p>OnInspectorGUI </p>
<p>HasPreviewGUI</p>
<p>OnPreviewSettings</p>
<p>OnInteractivePreviewGUI</p>
<p>OnPreviewGUI</p>
<h3 id="serializedobject-&#x4E0E;-serializedproperty">SerializedObject &#x4E0E; SerializedProperty<div id="SerializedObject"></div></h3>
<p>&#x5C06;&#x76EE;&#x6807;&#x811A;&#x672C;&#x7684;&#x5C5E;&#x6027;&#x6620;&#x5C04;&#x5230;inspector&#x9762;&#x677F;&#x4E0A;&#x53EF;&#x4EE5;&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#x3002;&#x7B2C;&#x4E00;&#x79CD;&#x5C31;&#x662F;&#x4E0A;&#x9762;&#x6240;&#x5C55;&#x793A;&#x7684;&#x90A3;&#x6837;&#x76F4;&#x63A5;&#x6620;&#x5C04;&#xFF1A;</p>
<pre class="language-"><code class="lang-csharp">    <span class="token class-name">MyPlayer</span> mp <span class="token operator">=</span> <span class="token punctuation">(</span>MyPlayer<span class="token punctuation">)</span>target<span class="token punctuation">;</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
    mp<span class="token punctuation">.</span>damage <span class="token operator">=</span> EditorGUILayout<span class="token punctuation">.</span><span class="token function">IntField</span><span class="token punctuation">(</span><span class="token string">&quot;A Damage&quot;</span><span class="token punctuation">,</span> mp<span class="token punctuation">.</span>damage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    mp<span class="token punctuation">.</span>armor <span class="token operator">=</span> EditorGUILayout<span class="token punctuation">.</span><span class="token function">IntField</span><span class="token punctuation">(</span><span class="token string">&quot;A Armor&quot;</span><span class="token punctuation">,</span> mp<span class="token punctuation">.</span>armor<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre>
<p>&#x53E6;&#x5916;&#x4E00;&#x79CD;&#xFF0C;&#x4E5F;&#x662F;Unity&#x5B98;&#x65B9;&#x63A8;&#x8350;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x5E8F;&#x5217;&#x5316;&#x7C7B;&#x548C;&#x5C5E;&#x6027;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnInspectorGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">MyPlayer</span> mp <span class="token operator">=</span> <span class="token punctuation">(</span>MyPlayer<span class="token punctuation">)</span>target<span class="token punctuation">;</span> 
    <span class="token comment">// &#x540C;&#x6B65;&#x5E8F;&#x5217;&#x5316;&#x7269;&#x4F53; serializedObject &#x6765;&#x81EA;&#x7236;&#x7C7B;Editor&#xFF0C;&#x6307;&#x793A;&#x6B63;&#x5728;&#x64CD;&#x4F5C;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5BF9;&#x8C61;</span>
    serializedObject<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// &#x901A;&#x7528;&#x5199;&#x6CD5;</span>
    EditorGUILayout<span class="token punctuation">.</span><span class="token function">PropertyField</span><span class="token punctuation">(</span>serializedObject<span class="token punctuation">.</span><span class="token function">FindProperty</span><span class="token punctuation">(</span><span class="token string">&quot;damage&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GUIContent</span><span class="token punctuation">(</span><span class="token string">&quot;Damage&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    EditorGUILayout<span class="token punctuation">.</span><span class="token function">PropertyField</span><span class="token punctuation">(</span>serializedObject<span class="token punctuation">.</span><span class="token function">FindProperty</span><span class="token punctuation">(</span><span class="token string">&quot;armor&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GUIContent</span><span class="token punctuation">(</span><span class="token string">&quot;Armor&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// &#x6742;&#x6280;&#x5199;&#x6CD5;</span>
    <span class="token class-name">SerializedProperty</span> damageProperty <span class="token operator">=</span> serializedObject<span class="token punctuation">.</span><span class="token function">FindProperty</span><span class="token punctuation">(</span><span class="token string">&quot;damage&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    damageProperty<span class="token punctuation">.</span>intValue <span class="token operator">=</span> EditorGUILayout<span class="token punctuation">.</span><span class="token function">IntField</span><span class="token punctuation">(</span><span class="token string">&quot;damage&quot;</span><span class="token punctuation">,</span>damageProperty<span class="token punctuation">.</span>intValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SerializedProperty</span> armorProperty  <span class="token operator">=</span> serializedObject<span class="token punctuation">.</span><span class="token function">FindProperty</span><span class="token punctuation">(</span><span class="token string">&quot;armor&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    armorProperty<span class="token punctuation">.</span>intValue <span class="token operator">=</span> EditorGUILayout<span class="token punctuation">.</span><span class="token function">IntField</span><span class="token punctuation">(</span><span class="token string">&quot;armor&quot;</span><span class="token punctuation">,</span> armorProperty<span class="token punctuation">.</span>intValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// &#x5E94;&#x7528;&#x4FEE;&#x6539;&#x540E;&#x7684;&#x5C5E;&#x6027;</span>
    serializedObject<span class="token punctuation">.</span><span class="token function">ApplyModifiedProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x5B98;&#x65B9;&#x5BF9;&#x5E8F;&#x5217;&#x5316;&#x7269;&#x4F53;&#x8FD9;&#x6837;&#x89E3;&#x91CA;&#xFF1A;</p>
<blockquote>
<p>SerializedObject opens a data stream to one or more target <a href="https://docs.unity.cn/2020.2/Documentation/ScriptReference/Object.html" target="_blank">Unity objects</a> at a time, which allows you to simultaneously edit serialized data that the objects share in common. For example, if you have several <a href="https://docs.unity.cn/2020.2/Documentation/ScriptReference/Behaviour.html" target="_blank">Behaviours</a> of different types in the data stream, the only property they have in common may be &apos;m_Enabled&apos;.</p>
<p>When you first create a SerializedObject instance it is up-to-date. Any changes that you make to a <a href="https://docs.unity.cn/2020.2/Documentation/ScriptReference/SerializedProperty.html" target="_blank">SerializedProperty</a> accessed within this data stream must ultimately be flushed via the <a href="https://docs.unity.cn/2020.2/Documentation/ScriptReference/SerializedObject.ApplyModifiedProperties.html" target="_blank">SerializedObject.ApplyModifiedProperties</a> method. If you keep a reference to a SerializedObject instance for more than one frame, you must make sure to manually call its <a href="https://docs.unity.cn/2020.2/Documentation/ScriptReference/SerializedObject.Update.html" target="_blank">SerializedObject.Update</a> method before you read any data from it, as one or more target objects may have been modified elsewhere, such as from a separate SerializedObject stream. Respectively, note that two different SerializedObject streams with the same target objects are independent from one another and you must manually synchronize them in this fashion if one or more of them is maintained over the course of several frames.</p>
<p>One of the most common uses of the SerializedObject and <a href="https://docs.unity.cn/2020.2/Documentation/ScriptReference/SerializedProperty.html" target="_blank">SerializedProperty</a> classes is when creating custom <a href="https://docs.unity.cn/2020.2/Documentation/ScriptReference/Editor.html" target="_blank">Editors</a>, where using SerializedObject is the recommended approach as opposed to modifying inspected target objects directly.</p>
<p><a href="https://docs.unity.cn/2020.2/Documentation/ScriptReference/SerializedObject.html" target="_blank">https://docs.unity.cn/2020.2/Documentation/ScriptReference/SerializedObject.html</a></p>
</blockquote>
<p>SerializedObject &#x53EF;&#x4EE5;&#x4E00;&#x6B21;&#x6027;&#x7ED9;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A; Unity &#x5BF9;&#x8C61;&#x6253;&#x5F00;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x6D41;&#xFF0C;&#x8FD9;&#x8BA9;&#x60A8;&#x80FD;&#x540C;&#x65F6;&#x7F16;&#x8F91;&#x8FD9;&#x4E9B;&#x5BF9;&#x8C61;&#x5171;&#x4EAB;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x6570;&#x636E;&#x3002; z&#x5BF9;&#x6570;&#x636E;&#x6D41;&#x4E2D;&#x7684; SerializedProperty &#x6240;&#x505A;&#x7684;&#x4EFB;&#x4F55;&#x66F4;&#x6539;&#x6700;&#x7EC8;&#x90FD;&#x5FC5;&#x987B;&#x901A;&#x8FC7; SerializedObject &#x5237;&#x65B0;&#x3002;&#xFF08;&#x901A;&#x8FC7;&#x51FD;&#x6570;<code>ApplyModifiedProperties()</code>&#x8FDB;&#x884C;&#x5E94;&#x7528;&#xFF09;</p>
<p>&#x7531;&#x4E8E;&#x5177;&#x6709;&#x76F8;&#x540C;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x7684;&#x4E24;&#x4E2A;&#x4E0D;&#x540C; SerializedObject &#x6D41;&#x5F7C;&#x6B64;&#x72EC;&#x7ACB;&#xFF0C;&#x5982;&#x679C;&#x5728;&#x591A;&#x4E2A;&#x5E27;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x7EF4;&#x62A4;&#x4E86;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#xFF0C;&#x5219;&#x5FC5;&#x987B;&#x4EE5;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x624B;&#x52A8;&#x540C;&#x6B65;&#x5B83;&#x4EEC;&#x3002;&#xFF08;&#x901A;&#x8FC7;&#x51FD;&#x6570;<code>Update()</code>&#x8FDB;&#x884C;&#x540C;&#x6B65;&#xFF09;</p>
<p>SerializedObject &#x548C; SerializedProperty &#x7C7B;&#x6700;&#x5E38;&#x89C1;&#x7684;&#x7528;&#x9014;&#x4E4B;&#x4E00;&#x662F;&#x5728;&#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;&#x7F16;&#x8F91;&#x5668;&#x65F6;&#xFF0C;&#x63A8;&#x8350;&#x4F7F;&#x7528; SerializedObject&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x76F4;&#x63A5;&#x4FEE;&#x6539;&#x5DF2;&#x68C0;&#x67E5;&#x7684;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x3002;</p>
<h3 id="&#x7EE7;&#x627F;-propertydrawer-&#x5904;&#x7406;&#x5E8F;&#x5217;&#x5316;&#x7C7B;">&#x7EE7;&#x627F; PropertyDrawer &#x5904;&#x7406;&#x5E8F;&#x5217;&#x5316;&#x7C7B;<div id="PropertyDrawer"></div></h3>
<p>&#x9664;&#x4E86;Unity&#x5185;&#x7F6E;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x5916;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x5728;&#x9762;&#x677F;&#x4E0A;&#x5C55;&#x793A;&#x7279;&#x6B8A;&#x7C7B;&#x7684;&#x5B57;&#x6BB5;&#xFF0C;&#x5C31;&#x5FC5;&#x987B;&#x5BF9;&#x7C7B;&#x8FDB;&#x884C;&#x5E8F;&#x5217;&#x5316;&#xFF0C;&#x800C;&#x60F3;&#x8981;&#x81EA;&#x5B9A;&#x4E49;&#x5E8F;&#x5217;&#x5316;&#x7C7B;&#x7684;&#x663E;&#x793A;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x7528;&#x5230; <code>PropertyDrawer</code>&#x3002;</p>
<p>&#x4ECE;<code>PropertyDrawer</code>&#x6D3E;&#x751F;&#x51FA;&#x6765;&#x7684;&#x5B50;&#x7C7B;&#x62E5;&#x6709;&#x4E24;&#x79CD;&#x7528;&#x9014;&#xFF1A;</p>
<ul>
<li>&#x5B9A;&#x5236;&#x4E00;&#x4E2A;<code>Serializable class</code> &#x7684;<code>GUI</code>&#x9762;&#x677F;</li>
<li>&#x5B9A;&#x5236;&#x4E00;&#x4E2A;<code>Attribute</code>&#x7279;&#x6027;</li>
</ul>
<p>&#x6B64;&#x5904;&#x53EA;&#x6D89;&#x53CA;&#x4ED6;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x7528;&#x9014;&#xFF0C;&#x5373;&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5E8F;&#x5217;&#x5316;&#x7C7B;&#x7684;<code>Inspector</code>&#x9762;&#x677F;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token comment">// Recip.cs</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">IngredientUnit</span> <span class="token punctuation">{</span> Spoon<span class="token punctuation">,</span> Cup<span class="token punctuation">,</span> Bowl<span class="token punctuation">,</span> Piece <span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Serializable</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Ingredient</span>
<span class="token punctuation">{</span>  
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> amount<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">IngredientUnit</span> unit<span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Recipe</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Ingredient</span> potionResult<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// IngredientDrawer.cs</span>
<span class="token punctuation">[</span><span class="token function">CustomPropertyDrawer</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Ingredient</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IngredientDrawer</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">PropertyDrawer</span></span>
<span class="token punctuation">{</span>  
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">float</span></span> <span class="token function">GetPropertyHeight</span><span class="token punctuation">(</span><span class="token class-name">SerializedProperty</span> property<span class="token punctuation">,</span> <span class="token class-name">GUIContent</span> label<span class="token punctuation">)</span>
    <span class="token punctuation">{</span> 
        <span class="token keyword">return</span> <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">GetPropertyHeight</span><span class="token punctuation">(</span>property<span class="token punctuation">,</span> label<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span> 
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnGUI</span><span class="token punctuation">(</span><span class="token class-name">Rect</span> position<span class="token punctuation">,</span> <span class="token class-name">SerializedProperty</span> property<span class="token punctuation">,</span> <span class="token class-name">GUIContent</span> label<span class="token punctuation">)</span>
    <span class="token punctuation">{</span> 
        <span class="token comment">// &#x8BBE;&#x7F6E;&#x524D;&#x7F6E;&#x6807;&#x7B7E;&#xFF0C;&#x5E76;&#x83B7;&#x53D6;&#x63A7;&#x4EF6;&#x4F4D;&#x7F6E;</span>
        position <span class="token operator">=</span> EditorGUI<span class="token punctuation">.</span><span class="token function">PrefixLabel</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> GUIUtility<span class="token punctuation">.</span><span class="token function">GetControlID</span><span class="token punctuation">(</span>FocusType<span class="token punctuation">.</span>Passive<span class="token punctuation">)</span><span class="token punctuation">,</span> label<span class="token punctuation">)</span><span class="token punctuation">;</span> 

        <span class="token comment">// &#x8BBE;&#x7F6E;&#x6807;&#x7B7E;&#x7F29;&#x8FDB;</span>
        <span class="token class-name"><span class="token keyword">int</span></span> indent <span class="token operator">=</span> EditorGUI<span class="token punctuation">.</span>indentLevel<span class="token punctuation">;</span>
        EditorGUI<span class="token punctuation">.</span>indentLevel <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token comment">// &#x8BA1;&#x7B97;&#x63A7;&#x4EF6;&#x4F4D;&#x7F6E;</span>
        <span class="token class-name">Rect</span> amountRect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Rect</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>x<span class="token punctuation">,</span> position<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> position<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Rect</span> unitRect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Rect</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token number">35</span><span class="token punctuation">,</span> position<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> position<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Rect</span> nameRect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Rect</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token number">90</span><span class="token punctuation">,</span> position<span class="token punctuation">.</span>y<span class="token punctuation">,</span> position<span class="token punctuation">.</span>width <span class="token operator">-</span> <span class="token number">90</span><span class="token punctuation">,</span> position<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// &#x7ED8;&#x5236;&#x5B57;&#x6BB5;&#xFF0C;&#x901A;&#x8FC7; GUIContent.none &#x53BB;&#x9664;&#x5404;&#x81EA;&#x7684;&#x524D;&#x7F6E;&#x6807;&#x7B7E;</span>
        EditorGUI<span class="token punctuation">.</span><span class="token function">PropertyField</span><span class="token punctuation">(</span>amountRect<span class="token punctuation">,</span> property<span class="token punctuation">.</span><span class="token function">FindPropertyRelative</span><span class="token punctuation">(</span><span class="token string">&quot;amount&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> GUIContent<span class="token punctuation">.</span>none<span class="token punctuation">)</span><span class="token punctuation">;</span>
        EditorGUI<span class="token punctuation">.</span><span class="token function">PropertyField</span><span class="token punctuation">(</span>unitRect<span class="token punctuation">,</span> property<span class="token punctuation">.</span><span class="token function">FindPropertyRelative</span><span class="token punctuation">(</span><span class="token string">&quot;unit&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> GUIContent<span class="token punctuation">.</span>none<span class="token punctuation">)</span><span class="token punctuation">;</span>
        EditorGUI<span class="token punctuation">.</span><span class="token function">PropertyField</span><span class="token punctuation">(</span>nameRect<span class="token punctuation">,</span> property<span class="token punctuation">.</span><span class="token function">FindPropertyRelative</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> GUIContent<span class="token punctuation">.</span>none<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// &#x8FD8;&#x539F;&#x6807;&#x7B7E;&#x7F29;&#x8FDB;</span>
        EditorGUI<span class="token punctuation">.</span>indentLevel <span class="token operator">=</span> indent<span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
</code></pre>
<p><img src="img/PropertyDrawer.png" alt="PropertyDrawer"></p>
<p>&#x9996;&#x5148;<code>CustomPropertyDrawer</code>&#x7279;&#x6027;&#x6307;&#x5B9A;&#x4E86;&#x8981;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x7C7B;&#x662F;<code>Ingredient</code>&#x3002;</p>
<p>&#x5728;<code>IngredientDrawer</code>&#x7C7B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x91CD;&#x5199;&#x4E86;&#x7236;&#x7C7B;&#x7684;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#xFF1A;</p>
<p><code>GetPropertyHeight(SerializedProperty property, GUIContent label)</code>&#xFF1A;&#x83B7;&#x53D6;&#x63A7;&#x4EF6;&#x9AD8;&#x5EA6;&#xFF0C;&#x8FD9;&#x91CC;&#x6307;&#x663E;&#x793A;&#x5E8F;&#x5217;&#x5316;&#x7C7B; <code>Ingredient</code>&#x6240;&#x6709;&#x5185;&#x5BB9;&#x6240;&#x9700;&#x8981;&#x7684;&#x9AD8;&#x5EA6;&#x3002;&#x9ED8;&#x8BA4;&#x8FD4;&#x56DE;&#x7684;&#x662F;&#x56FA;&#x5B9A;&#x4E00;&#x884C;&#x7684;&#x9AD8;&#x5EA6;&#xFF0C;&#x6211;&#x7684;&#x7535;&#x8111;&#x4E0A;&#x662F;&#x56FA;&#x5B9A;&#x503C;18&#x3002;</p>
<ul>
<li><code>property</code>&#xFF1A;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x6307;&#x793A;&#x8981;&#x5C55;&#x793A;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5C5E;&#x6027;&#xFF0C;&#x8FD9;&#x91CC;&#x6307; <code>Recipe</code>&#x7C7B;&#x4E2D;&#x7684; <code>pontionResult</code>&#x5B57;&#x6BB5;&#x3002;</li>
<li><code>label</code>&#xFF1A;&#x7B2C;&#x4E8C;&#x53C2;&#x6570;&#x6307;&#x793A;&#x8981;&#x5C55;&#x793A;&#x7684;&#x6807;&#x7B7E;&#x5185;&#x5BB9;&#xFF0C;&#x8FD9;&#x91CC;&#x6307; Potion Result &#x3002;</li>
</ul>
<p><code>OnGUI(Rect position, SerializedProperty property, GUIContent label)</code>&#xFF1A;&#x5B9E;&#x9645;&#x7ED8;&#x5236;&#x7684;&#x5185;&#x5BB9;&#x90FD;&#x5305;&#x542B;&#x5728;&#x6B64;&#x51FD;&#x6570;&#x4E2D;&#x3002;</p>
<ul>
<li><code>positon</code>&#xFF1A;&#x6839;&#x636E;<code>GetPropertyHeight</code>&#x51FD;&#x6570;&#x83B7;&#x53D6;&#x9AD8;&#x5EA6;&#x540E;&#xFF0C;&#x8BA1;&#x7B97;&#x51FA;&#x6765;&#x63A7;&#x4EF6;&#x9700;&#x8981;&#x5360;&#x636E;&#x7684;&#x8303;&#x56F4;&#x5927;&#x5C0F;&#x3002;</li>
<li><code>property</code>&#xFF1A;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x6307;&#x793A;&#x8981;&#x5C55;&#x793A;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5C5E;&#x6027;&#xFF0C;&#x8FD9;&#x91CC;&#x6307; <code>Recipe</code>&#x7C7B;&#x4E2D;&#x7684; <code>pontionResult</code>&#x5B57;&#x6BB5;&#x3002;</li>
<li><code>label</code>&#xFF1A;&#x7B2C;&#x4E8C;&#x53C2;&#x6570;&#x6307;&#x793A;&#x8981;&#x5C55;&#x793A;&#x7684;&#x6807;&#x7B7E;&#x5185;&#x5BB9;&#xFF0C;&#x8FD9;&#x91CC;&#x6307; Potion Result &#x3002;</li>
</ul>
<p>&#x7531;&#x4E0A;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x8C03;&#x7528;&#x987A;&#x5E8F;&#x662F;&#x5148;&#x8C03;&#x7528;<code>GetPropertyHeight</code>&#x786E;&#x5B9A;&#x9AD8;&#x5EA6;&#xFF0C;&#x540E;&#x8C03;&#x7528;<code>OnGUI</code>&#x7ED8;&#x5236;&#x9762;&#x677F;&#x5185;&#x5BB9;&#x3002;</p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x4E0A;&#x9762;&#x6709;&#x4E00;&#x4E2A;<code>indentLevel</code>&#x5B57;&#x6BB5;&#x63A7;&#x5236;&#x7740;&#x6807;&#x7B7E;&#x7684;&#x7F29;&#x8FDB;&#xFF0C;&#x5177;&#x4F53;&#x6548;&#x679C;&#x5982;&#x5B98;&#x65B9;&#x56FE;&#x7247;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="img/EditorGUIIndent.png" alt="EditorGUIIndent"></p>
<p>&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x4E86;&#x56FA;&#x5B9A;&#x5E03;&#x5C40;<code>EditorGUI</code>&#x7C7B;&#xFF0C;&#x6240;&#x6709;&#x90E8;&#x5206;&#x9700;&#x8981;&#x624B;&#x52A8;&#x63A7;&#x5236;&#x4ED6;&#x4EEC;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x5F53;&#x7136;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x81EA;&#x52A8;&#x5E03;&#x5C40; <code>EditorGUILayout</code>&#x53BB;&#x505A;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CustomPropertyDrawer</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Ingredient</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IngredientDrawer</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">PropertyDrawer</span></span>
<span class="token punctuation">{</span>  
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">float</span></span> <span class="token function">GetPropertyHeight</span><span class="token punctuation">(</span><span class="token class-name">SerializedProperty</span> property<span class="token punctuation">,</span> <span class="token class-name">GUIContent</span> label<span class="token punctuation">)</span>
    <span class="token punctuation">{</span> 
        <span class="token keyword">return</span> <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">GetPropertyHeight</span><span class="token punctuation">(</span>property<span class="token punctuation">,</span> label<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span> 
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnGUI</span><span class="token punctuation">(</span><span class="token class-name">Rect</span> position<span class="token punctuation">,</span> <span class="token class-name">SerializedProperty</span> property<span class="token punctuation">,</span> <span class="token class-name">GUIContent</span> label<span class="token punctuation">)</span>
    <span class="token punctuation">{</span> 
        EditorGUILayout<span class="token punctuation">.</span><span class="token function">PropertyField</span><span class="token punctuation">(</span>property<span class="token punctuation">.</span><span class="token function">FindPropertyRelative</span><span class="token punctuation">(</span><span class="token string">&quot;unit&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GUIContent</span><span class="token punctuation">(</span><span class="token string">&quot;Unit&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        EditorGUILayout<span class="token punctuation">.</span><span class="token function">PropertyField</span><span class="token punctuation">(</span>property<span class="token punctuation">.</span><span class="token function">FindPropertyRelative</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GUIContent</span><span class="token punctuation">(</span><span class="token string">&quot;Name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre>
<p><img src="img/PropertyDrawerEditorLayout.png" alt="PropertyDrawerEditorLayout"></p>
<p>&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4F7F;&#x7528;&#x4E86;&#x81EA;&#x52A8;&#x5E03;&#x5C40;&#x540E;&#xFF0C;<code>GetPropertyHeight</code>&#x51FD;&#x6570;&#x7684;&#x4F5C;&#x7528;&#x4E0B;&#x591A;&#x5F00;&#x8F9F;&#x7684;&#x4E00;&#x884C;&#x7A7A;&#x767D;&#x4F4D;&#x7F6E;&#x540E;&#xFF0C;&#x624D;&#x5F00;&#x59CB;&#x81EA;&#x52A8;&#x5E03;&#x5C40;&#x3002;</p>
<p>&#x8FD9;&#x91CC;&#x5B98;&#x65B9;&#x5E76;&#x4E0D;&#x5EFA;&#x8BAE;&#x8FD9;&#x6837;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;&#x51FA;&#x4E8E;&#x6027;&#x80FD;&#x539F;&#x56E0;&#xFF0C;<code>EditorGUILayout</code> &#x51FD;&#x6570;&#x4E0D;&#x80FD;&#x7528;&#x4E8E; <code>PropertyDrawer</code>&#x3002;</p>
<blockquote>
<p>Note that for performance reasons, EditorGUILayout functions are not usable with PropertyDrawers.</p>
<p><a href="https://docs.unity.cn/2020.2/Documentation/ScriptReference/PropertyDrawer.html" target="_blank">https://docs.unity.cn/2020.2/Documentation/ScriptReference/PropertyDrawer.html</a></p>
</blockquote>
<h3 id="&#x4FEE;&#x6539;-headergui">&#x4FEE;&#x6539; HeaderGUI<div id="HeaderGUI"></div></h3>
<p><code>Editor</code>&#x7C7B;&#x4E2D;&#x6709;<code>OnHeaderGUI()</code>&#x51FD;&#x6570;&#xFF0C;&#x4ECE;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x4E0A;&#x770B;&#x5E76;&#x6CA1;&#x6709;&#x5BF9;&#x6B64;&#x51FD;&#x6570;&#x8FDB;&#x884C;&#x8BF4;&#x660E;&#x3002;&#x5728;&#x5BF9;&#x81EA;&#x5DF1;&#x7684;&#x811A;&#x672C;&#x8FDB;&#x884C;&#x6269;&#x5C55;&#x7684;Editor&#x4E2D;&#x5B9E;&#x73B0;&#x8BE5;&#x65B9;&#x6CD5;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#x3002;</p>
<p>&#x5374;&#x5BF9;<code>DrawHeader()</code>&#x8FDB;&#x884C;&#x4E86;&#x8BF4;&#x660E;&#x3002;</p>
<blockquote>
<p>Call this function to draw the header of the editor.</p>
<p><a href="https://docs.unity.cn/2020.2/Documentation/ScriptReference/Editor.DrawHeader.html" target="_blank">https://docs.unity.cn/2020.2/Documentation/ScriptReference/Editor.DrawHeader.html</a></p>
</blockquote>
<p>&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x65F6;&#xFF0C;&#x4F3C;&#x4E4E;&#x5E76;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x6548;&#x679C;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x53CD;&#x7F16;&#x8BD1;<code>UnityEditor.dll</code>&#xFF0C;&#x67E5;&#x770B;<code>Editor.DrawHeader()</code>&#x6E90;&#x7801;&#xFF1A;</p>
<pre class="language-"><code class="lang-csharp"><span class="token comment">// &#x53EA;&#x5C55;&#x793A;&#x5F00;&#x59CB;&#x51E0;&#x884C;</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DrawHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> 
    <span class="token class-name"><span class="token keyword">bool</span></span> hierarchyMode <span class="token operator">=</span> EditorGUIUtility<span class="token punctuation">.</span>hierarchyMode<span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">bool</span></span> flag <span class="token operator">=</span> hierarchyMode<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">DrawHeaderFromInsideHierarchy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">OnHeaderGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token range operator">..</span><span class="token punctuation">.</span> 
<span class="token punctuation">}</span>
<span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DrawHeaderFromInsideHierarchy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">GUIStyle</span> style <span class="token operator">=</span> GUILayoutUtility<span class="token punctuation">.</span>topLevel<span class="token punctuation">.</span>style<span class="token punctuation">;</span>
    EditorGUILayout<span class="token punctuation">.</span><span class="token function">EndVertical</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">OnHeaderGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    EditorGUILayout<span class="token punctuation">.</span><span class="token function">BeginVertical</span><span class="token punctuation">(</span>style<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GUILayoutOption</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x6765;<code>DrawHeader</code>&#x5185;&#x90E8;&#xFF0C;&#x4F1A;&#x6839;&#x636E;<code>EditorGUIUtility.hierarchyMode</code>&#x8FDB;&#x884C;&#x5224;&#x65AD;&#x5F53;&#x524D;Editor&#x662F;&#x5426;&#x5904;&#x4E8E;&#x4E00;&#x79CD;&#x5C42;&#x7EA7;&#x6A21;&#x5F0F;&#xFF0C;&#x5982;&#x679C;&#x662F;&#xFF0C;&#x5C31;&#x76F4;&#x63A5;&#x5728;&#x5C42;&#x7EA7;&#x5185;&#x90E8;&#x6DFB;&#x52A0;GUI&#xFF08;&#x5E76;&#x8C03;&#x7528;<code>OnHeaderGUI()</code>&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x662F;&#xFF0C;&#x5C31;&#x76F4;&#x63A5;&#x8C03;&#x7528;<code>OnHeaderGUI()</code>&#x3002;</p>
<p>&#x6240;&#x8C13;&#x5C42;&#x7EA7;&#x6A21;&#x5F0F;&#xFF0C;&#x662F;&#x6307;&#x751F;&#x6210;Editor&#x9762;&#x677F;&#x662F;&#x53EF;&#x4EE5;&#x6536;&#x7F29;&#x7684;&#xFF0C;&#x4F8B;&#x5982;&#x4E0B;&#x56FE;&#x7684;Mesh Filter&#x7EC4;&#x4EF6;&#xFF0C;&#x4E0A;&#x9762;&#x6700;&#x5DE6;&#x4FA7;&#x6709;&#x4E2A;&#x5012;&#x4E09;&#x89D2;&#x7B26;&#x53F7;&#xFF0C;&#x70B9;&#x51FB;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x6536;&#x7F29;&#xFF0C;&#x5C31;&#x662F;&#x5C42;&#x7EA7;&#x6A21;&#x5F0F;&#x3002;</p>
<p><img src="img/HierarchyMode.png" alt="HierarchyMode"></p>
<p>&#x4F46;&#x53EF;&#x60DC;&#x7684;&#x662F;&#xFF0C;&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x5199;&#x7684;Editor&#xFF0C;&#x6211;&#x76EE;&#x524D;&#x8FD8;&#x6CA1;&#x6709;&#x627E;&#x5230;&#x80FD;&#x591F;&#x53D6;&#x6D88;&#x5C42;&#x7EA7;&#x6A21;&#x5F0F;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5728;<code>OnHeaderGUI()</code>&#x4E2D;&#x5199;&#x597D;&#x5185;&#x5BB9;&#xFF0C;&#x518D;&#x8C03;&#x7528;<code>DrawHeader()</code>&#xFF0C;&#x8FD9;&#x548C;&#x76F4;&#x63A5;&#x5728;<code>OnInspectorGUI()</code>&#x4E2D;&#x5199;UI&#x63A7;&#x4EF6;&#x6CA1;&#x6709;&#x533A;&#x522B;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x53EF;&#x4EE5;&#x518D;&#x770B;&#x770B;UnityEditor&#x4E0B;&#x9762;&#x7684;&#x6E90;&#x7801;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;<code>OnHeaderGUI()</code>&#x786E;&#x5B9E;&#x6709;&#x88AB;&#x4F7F;&#x7528;&#xFF0C;&#x4F46;&#x4F3C;&#x4E4E;&#x53EA;&#x6709;&#x7279;&#x5B9A;&#x7684;&#x51E0;&#x4E2A;&#x7C7B;&#x4E2D;&#x7684;<code>OnHeaderGUI()</code>&#x4F1A;&#x88AB;&#x81EA;&#x52A8;&#x8C03;&#x7528;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x4E00;&#x4E0B;<code>UnityEditor.GameObjectInspector</code>&#x8FD9;&#x4E2A;&#x7C7B;&#xFF0C;</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">namespace</span> <span class="token namespace">UnityEditor</span>
<span class="token punctuation">{</span> 
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CanEditMultipleObjects</span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CustomEditor</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">GameObject</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">internal</span> <span class="token keyword">class</span> <span class="token class-name">GameObjectInspector</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Editor</span></span>
    <span class="token punctuation">{</span>
        <span class="token range operator">..</span><span class="token punctuation">.</span>
        <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnHeaderGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">bool</span></span> enabled <span class="token operator">=</span> GUI<span class="token punctuation">.</span>enabled<span class="token punctuation">;</span>
            GUI<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            EditorGUILayout<span class="token punctuation">.</span><span class="token function">BeginVertical</span><span class="token punctuation">(</span>EditorStyles<span class="token punctuation">.</span>inspectorBig<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GUILayoutOption</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            GUI<span class="token punctuation">.</span>enabled <span class="token operator">=</span> enabled<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">DrawInspector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            EditorGUILayout<span class="token punctuation">.</span><span class="token function">EndVertical</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><code>GameObjectInspector</code>&#x662F;&#x5BF9;GamObject&#x5BF9;&#x8C61;&#x7684;Inspector&#x9762;&#x677F;&#x8FDB;&#x884C;&#x4E86;&#x6269;&#x5C55;&#xFF0C;&#x6211;&#x4EEC;&#x968F;&#x4FBF;&#x70B9;&#x51FB;&#x4E00;&#x4E2A;GameObject&#xFF0C;&#x6700;&#x521D;Inspector&#x9762;&#x677F;&#x7684;&#x6837;&#x5B50;&#x5C31;&#x662F;&#x5728;&#x8FD9;&#x4E2A;&#x7C7B;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x3002;</p>
<p><img src="img/InspectorHeaderGUI.png" alt="InpsectorHeaderGUI"></p>
<p>&#x7EA2;&#x8272;&#x65B9;&#x6846;&#x4E2D;&#x5B9E;&#x9645;&#x4E0A;&#x5C31;&#x662F;<code>OnHeaderGUI()</code>&#x63A7;&#x5236;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x800C;&#x7EFF;&#x8272;&#x65B9;&#x6846;&#x81EA;&#x7136;&#x662F;&#x7531;<code>UnityEditor.TransformInspector</code>&#x7C7B;&#x6240;&#x63A7;&#x5236;&#x7684;&#x3002;</p>
<p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x518D;&#x6B21;&#x91CD;&#x65B0;&#x5BF9;<code>GameObject</code>&#x8FDB;&#x884C;&#x6269;&#x5C55;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x9A8C;&#x8BC1;&#x4E86;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CustomEditor</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">GameObject</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyTestEditor</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Editor</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnHeaderGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;OnHeaderGUI&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        GUILayout<span class="token punctuation">.</span><span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">&quot;REOREOREOREO...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">OnHeaderGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// &#x91CD;&#x5199;OnInspectorGUI&#xFF0C;&#x5982;&#x679C;&#x9ED8;&#x8BA4;&#x5904;&#x7406;&#x4F1A;&#x8BA9;GameObject&#x4E2D;&#x7684;&#x5B57;&#x6BB5;&#x4EE5;&#x53E6;&#x5916;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x663E;&#x793A;&#x51FA;&#x6765;</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnInspectorGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span> 
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;OnInspectorGUI&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6211;&#x4EEC;&#x5F97;&#x5230;&#x4E86;&#x9884;&#x671F;&#x7684;&#x6548;&#x679C;&#x3002;</p>
<p><img src="img/GamobjectHeaderGUI.png" alt="GamobjectHeaderGUI"></p>
<p>&#x50CF;&#x8FD9;&#x6837;<code>OnHeaderGUI</code>&#x4F1A;&#x81EA;&#x52A8;&#x8C03;&#x7528;&#x7684;&#x7C7B;&#xFF0C;&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x8FD8;&#x6709;<code>UnityEditor.AnimationWindowEventInspector</code>&#x3001;<code>UnityEditor.MaterialEditor</code>&#x7B49;&#x3002;</p>
<p>&#x90A3;&#x6211;&#x4EEC;&#x65E0;&#x6CD5;&#x5728;&#x5176;&#x4ED6;&#x7EC4;&#x4EF6;&#x5BF9;Header&#x8FDB;&#x884C;&#x63A7;&#x5236;&#x4E86;&#x5417;&#xFF1F;</p>
<p>&#x5F53;&#x7136;&#x53EF;&#x4EE5;&#xFF0C;&#x8FD9;&#x65F6;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7528;&#x5230;<code>Editor.finishedDefaultHeaderGUI</code>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x4E8B;&#x4EF6;&#xFF0C;&#x4ED6;&#x4F1A;&#x5728;&#x6BCF;&#x6B21;<code>OnHeaderGUI</code>&#x7ED8;&#x5236;&#x5B8C;&#x6210;&#x540E;&#x8FDB;&#x884C;&#x6267;&#x884C;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CustomEditor</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MyTest</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyTestEditor</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Editor</span></span>
<span class="token punctuation">{</span> 
    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">HeaderGUI</span><span class="token punctuation">(</span><span class="token class-name">Editor</span> editor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;HeaderGUI&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &#x786E;&#x5B9A;&#x5F53;&#x524D;&#x8C03;&#x7528;&#xFF0C;&#x662F;&#x5728;GameobjectInspector.OnHeaderGUI()&#x8C03;&#x7528;&#x7ED3;&#x675F;&#x540E;&#x89E6;&#x53D1;&#x7684;&#x3002;</span>
        <span class="token comment">// &#x5426;&#x5219;&#xFF0C;&#x6309;&#x94AE;&#x8FD8;&#x4F1A;&#x51FA;&#x73B0;&#x5728;Material&#x7B49;&#x9762;&#x677F;&#x4E0A;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>editor<span class="token punctuation">.</span>target <span class="token keyword">is</span> <span class="token class-name">GameObject</span><span class="token punctuation">)</span>
        GUILayout<span class="token punctuation">.</span><span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">&quot;cccccccccccccccccc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        finishedDefaultHeaderGUI <span class="token operator">+=</span> HeaderGUI<span class="token punctuation">;</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;enable&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnDisable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// &#x5FC5;&#x987B;&#x51CF;&#x6389;&#xFF0C;&#x5426;&#x5219;&#x6BCF;&#x6B21;&#x5237;&#x65B0;&#x5C31;&#x591A;&#x4E00;&#x4E2A;&#x6309;&#x94AE;</span>
        finishedDefaultHeaderGUI <span class="token operator">-=</span> HeaderGUI<span class="token punctuation">;</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;Disable&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img src="img/MyTestHeader.png" alt="MyTestHeader"></p>
<h3 id="&#x591A;&#x4E2A;&#x7A0B;&#x5E8F;&#x5BF9;&#x540C;&#x4E00;&#x9762;&#x677F;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;">&#x591A;&#x4E2A;&#x7A0B;&#x5E8F;&#x5BF9;&#x540C;&#x4E00;&#x9762;&#x677F;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;<div id="Same"></div></h3>
<p>&#x4FEE;&#x6539;&#x9762;&#x677F;&#x7684;&#x9014;&#x5F84;&#x5F88;&#x591A;&#xFF0C;&#x5F53;&#x6709;&#x591A;&#x4E2A;&#x7A0B;&#x5E8F;&#x5BF9;&#x540C;&#x4E00;&#x4E2A;&#x9762;&#x677F;&#x8FDB;&#x884C;&#x63A7;&#x5236;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x4E00;&#x4E0B;&#x51E0;&#x70B9;&#xFF1A;</p>
<ul>
<li>&#x540C;&#x65F6;&#x53EA;&#x6709;&#x4E00;&#x4E2A;Editor&#x5BF9;&#x76EE;&#x6807;&#x751F;&#x6548;&#xFF0C;&#x5373;&#x4F7F;&#x6709;&#x591A;&#x4E2A;Editor&#x5BF9;&#x540C;&#x4E00;&#x4E2A;&#x7C7B;&#x8FDB;&#x884C;&#x6269;&#x5C55;&#xFF0C;&#x4E5F;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7C7B;&#x4F1A;&#x6267;&#x884C;&#x3002;</li>
<li>&#x5F53;&#x4E00;&#x4E2A;Editor&#x60F3;&#x5E94;&#x7528;&#x5B57;&#x6BB5;&#x7684;&#x6269;&#x5C55;&#x65F6;&#xFF08;&#x4F8B;&#x5982;&#xFF1A;&#x62E5;&#x6709;&#x7279;&#x6027;&#x7684;&#x5B57;&#x6BB5;&#x6216;&#x6269;&#x5C55;&#x8FC7;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x7C7B;&#xFF09;&#xFF0C;&#x5F97;&#x5728;<code>OnInspectorGUI</code>&#x4E2D;&#x5BF9;&#x76F8;&#x5E94;&#x5B57;&#x6BB5;&#x4F7F;&#x7528;<code>EditorGUILayout.PropertyField()</code>&#x8FDB;&#x884C;&#x663E;&#x793A;&#x3002;</li>
<li><code>PropertyDrawer</code> &#x540C;&#x65F6;&#x53EA;&#x80FD;&#x751F;&#x6548;&#x4E00;&#x4E2A;&#xFF0C;&#x800C;&#x5728;&#x540C;&#x4E00;&#x5B57;&#x6BB5;&#x4E0A;&#x9762;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A; <code>DecoratorDrawer</code> &#x5C5E;&#x6027;</li>
</ul>
<h2 id="&#x81EA;&#x5B9A;&#x4E49;scene&#x9762;&#x677F;">&#x81EA;&#x5B9A;&#x4E49;Scene&#x9762;&#x677F;<div id="&#x81EA;&#x5B9A;&#x4E49;Scene&#x9762;&#x677F;"></div></h2>
<h3 id="handles-">Handles <div id="Handles"></div></h3>
<p>&#x901A;&#x8FC7;Handles&#x7C7B;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x573A;&#x666F;&#x89C6;&#x56FE;&#x4E2D;&#x7684;&#x7269;&#x54C1;&#x63A7;&#x4EF6;&#x3002;</p>
<p>&#x5728;Handles&#x7C7B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x7684;&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x5927;&#x81F4;&#x5206;&#x4E3A;&#x4E09;&#x5927;&#x7C7B;&#x3002;</p>
<p>&#x9996;&#x5148;&#x662F;&#x4EE5;<code>Draw</code>&#x5F00;&#x5934;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x4F8B;&#x5982;<code>DrawLine</code>&#x3001;<code>DrawWireCube</code>&#x3002;&#x8FD9;&#x7C7B;&#x51FD;&#x6570;&#x7B80;&#x5355;&#x7C97;&#x66B4;&#xFF0C;&#x76F4;&#x63A5;&#x8FDB;&#x884C;&#x7ED8;&#x5236;&#xFF0C;&#x7ED8;&#x5236;&#x51FA;&#x6765;&#x7684;&#x56FE;&#x5F62;&#x4E0D;&#x53EF;&#x4EA4;&#x4E92;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token comment">// Handles.cs</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HandlerClass</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">7.0f</span><span class="token punctuation">;</span>  
    <span class="token keyword">public</span> <span class="token class-name">Vector3</span> targetPosition<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        transform<span class="token punctuation">.</span><span class="token function">LookAt</span><span class="token punctuation">(</span>targetPosition<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// HandlerClassEditor.cs</span>
<span class="token punctuation">[</span><span class="token function">CustomEditor</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">HandlerClass</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HandlerClassEditor</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Editor</span></span>
<span class="token punctuation">{</span> 
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnSceneGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> t <span class="token operator">=</span> target <span class="token keyword">as</span> <span class="token class-name">HandlerClass</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> tr <span class="token operator">=</span> t<span class="token punctuation">.</span>transform<span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> pos <span class="token operator">=</span> tr<span class="token punctuation">.</span>position<span class="token punctuation">;</span> 
        Handles<span class="token punctuation">.</span><span class="token function">DrawWireDisc</span><span class="token punctuation">(</span>pos<span class="token punctuation">,</span> tr<span class="token punctuation">.</span>up<span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img src="img/DrawWireDisc.png" alt="DrawWireDisc"></p>
<p>&#x7136;&#x540E;&#x662F;&#x4EE5;<code>Handle</code>&#x7ED3;&#x5C3E;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x4F8B;&#x5982;<code>ScaleValueHandle</code>&#x3001;<code>RadiusHandle</code>&#x3002;&#x8FD9;&#x7C7B;&#x51FD;&#x6570;&#x7ED8;&#x5236;&#x51FA;&#x6765;&#x7684;&#x56FE;&#x5F62;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;Scene&#x573A;&#x666F;&#x4E2D;&#x8FDB;&#x884C;&#x4EA4;&#x4E92;&#xFF0C;&#x4EA4;&#x4E92;&#x7684;&#x7ED3;&#x679C;&#x4F1A;&#x901A;&#x8FC7;&#x8FD4;&#x56DE;&#x503C;&#x4F20;&#x51FA;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HandlerClassEditor</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Editor</span></span>
<span class="token punctuation">{</span> 
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnSceneGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> t <span class="token operator">=</span> target <span class="token keyword">as</span> <span class="token class-name">HandlerClass</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> tr <span class="token operator">=</span> t<span class="token punctuation">.</span>transform<span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> pos <span class="token operator">=</span> tr<span class="token punctuation">.</span>position<span class="token punctuation">;</span> 

        Handles<span class="token punctuation">.</span><span class="token function">DrawWireDisc</span><span class="token punctuation">(</span>pos<span class="token punctuation">,</span> tr<span class="token punctuation">.</span>up<span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
          <span class="token comment">// BeginChangeCheck &#x68C0;&#x67E5;&#x76F4;&#x5230; EndChangeCheck &#x4E2D;&#xFF0C;&#x662F;&#x5426;&#x6709;&#x63A7;&#x4EF6;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x3002;</span>
        EditorGUI<span class="token punctuation">.</span><span class="token function">BeginChangeCheck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Vector3</span> newTargetPosition <span class="token operator">=</span> Handles<span class="token punctuation">.</span><span class="token function">PositionHandle</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>targetPosition<span class="token punctuation">,</span> Quaternion<span class="token punctuation">.</span>identity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>EditorGUI<span class="token punctuation">.</span><span class="token function">EndChangeCheck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span> 
            t<span class="token punctuation">.</span>targetPosition <span class="token operator">=</span> newTargetPosition<span class="token punctuation">;</span>
            t<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x62D6;&#x52A8;&#x591A;&#x51FA;&#x6765;&#x7684;&#x5750;&#x6807;&#x8F74;&#xFF0C;&#x5706;&#x5F62;&#x4F1A;&#x8DDF;&#x7740;&#x8F6C;&#x52A8;&#x3002;</p>
<p><img src="img/PositionHandle.png" alt="PositionHandle"></p>
<p>&#x6700;&#x540E;&#x662F;&#x4EE5;<code>Cap</code>&#x7ED3;&#x5C3E;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x4F8B;&#x5982;<code>CubeCap</code>&#x3001;<code>RectangleCap</code>&#x3002;&#x8FD9;&#x7C7B;&#x51FD;&#x6570;&#x662F;&#x59D4;&#x6258;<code>CapFunction</code>&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x914D;&#x5408;&#x90E8;&#x5206;Handle&#x51FD;&#x6570;&#x4F7F;&#x7528;&#xFF0C;&#x6307;&#x660E;&#x7ED8;&#x5236;&#x7684;&#x56FE;&#x6848;&#x7C7B;&#x578B;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CustomEditor</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">HandlerClass</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HandlerClassEditor</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Editor</span></span>
<span class="token punctuation">{</span> 
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnSceneGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> t <span class="token operator">=</span> target <span class="token keyword">as</span> <span class="token class-name">HandlerClass</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> tr <span class="token operator">=</span> t<span class="token punctuation">.</span>transform<span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> pos <span class="token operator">=</span> tr<span class="token punctuation">.</span>position<span class="token punctuation">;</span>

        Handles<span class="token punctuation">.</span><span class="token function">DrawWireDisc</span><span class="token punctuation">(</span>pos<span class="token punctuation">,</span> tr<span class="token punctuation">.</span>up<span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name"><span class="token keyword">float</span></span> size <span class="token operator">=</span> <span class="token number">3f</span><span class="token punctuation">;</span>
        <span class="token class-name">Vector3</span> snap <span class="token operator">=</span> Vector3<span class="token punctuation">.</span>one <span class="token operator">*</span> <span class="token number">0.5f</span><span class="token punctuation">;</span>

        EditorGUI<span class="token punctuation">.</span><span class="token function">BeginChangeCheck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// RectangleHandleCap &#x6307;&#x793A;&#x56FE;&#x6848;&#x4E3A;&#x77E9;&#x5F62;</span>
        <span class="token class-name">Vector3</span> newTargetPosition <span class="token operator">=</span> Handles<span class="token punctuation">.</span><span class="token function">FreeMoveHandle</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>targetPosition<span class="token punctuation">,</span> Quaternion<span class="token punctuation">.</span>identity<span class="token punctuation">,</span> size<span class="token punctuation">,</span> snap<span class="token punctuation">,</span> Handles<span class="token punctuation">.</span>RectangleHandleCap<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>EditorGUI<span class="token punctuation">.</span><span class="token function">EndChangeCheck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span> 
            t<span class="token punctuation">.</span>targetPosition <span class="token operator">=</span> newTargetPosition<span class="token punctuation">;</span>
            t<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8FD9;&#x91CC;&#x7684;&#x77E9;&#x5F62;&#x5728;&#x7F16;&#x8F91;&#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x4EFB;&#x610F;&#x62D6;&#x52A8;&#x3002;</p>
<p><img src="img/RectangleHandleCap.png" alt="RectangleHandleCap"></p>
<p>&#x5F53;&#x7136;&#xFF0C;&#x5B83;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x72EC;&#x7ACB;&#x4F7F;&#x7528;&#x8FDB;&#x884C;&#x7ED8;&#x5236;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token comment">// SphereExample.cs</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SphereExample</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// SphereExampleEditor.cs</span>
<span class="token punctuation">[</span><span class="token function">CustomEditor</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">SphereExample</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SphereExampleEditor</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Editor</span></span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">float</span></span> size <span class="token operator">=</span> <span class="token number">1f</span><span class="token punctuation">;</span> 
    <span class="token keyword">protected</span> <span class="token keyword">virtual</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnSceneGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>  
        <span class="token class-name">Transform</span> transform <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>SphereExample<span class="token punctuation">)</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span>transform<span class="token punctuation">;</span>
        Handles<span class="token punctuation">.</span>color <span class="token operator">=</span> Handles<span class="token punctuation">.</span>xAxisColor<span class="token punctuation">;</span>
        Handles<span class="token punctuation">.</span><span class="token function">SphereHandleCap</span><span class="token punctuation">(</span>
            <span class="token number">0</span><span class="token punctuation">,</span>
            transform<span class="token punctuation">.</span>position <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">3f</span><span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            transform<span class="token punctuation">.</span>rotation <span class="token operator">*</span> Quaternion<span class="token punctuation">.</span><span class="token function">LookRotation</span><span class="token punctuation">(</span>Vector3<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">,</span>
            size<span class="token punctuation">,</span>
            EventType<span class="token punctuation">.</span>Repaint
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        Handles<span class="token punctuation">.</span>color <span class="token operator">=</span> Handles<span class="token punctuation">.</span>yAxisColor<span class="token punctuation">;</span>
        Handles<span class="token punctuation">.</span><span class="token function">SphereHandleCap</span><span class="token punctuation">(</span>
            <span class="token number">0</span><span class="token punctuation">,</span>
            transform<span class="token punctuation">.</span>position <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">0f</span><span class="token punctuation">,</span> <span class="token number">3f</span><span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            transform<span class="token punctuation">.</span>rotation <span class="token operator">*</span> Quaternion<span class="token punctuation">.</span><span class="token function">LookRotation</span><span class="token punctuation">(</span>Vector3<span class="token punctuation">.</span>up<span class="token punctuation">)</span><span class="token punctuation">,</span>
            size<span class="token punctuation">,</span>
            EventType<span class="token punctuation">.</span>Repaint
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        Handles<span class="token punctuation">.</span>color <span class="token operator">=</span> Handles<span class="token punctuation">.</span>zAxisColor<span class="token punctuation">;</span>
        Handles<span class="token punctuation">.</span><span class="token function">SphereHandleCap</span><span class="token punctuation">(</span>
            <span class="token number">0</span><span class="token punctuation">,</span>
            transform<span class="token punctuation">.</span>position <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span><span class="token number">0f</span><span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">,</span> <span class="token number">3f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            transform<span class="token punctuation">.</span>rotation <span class="token operator">*</span> Quaternion<span class="token punctuation">.</span><span class="token function">LookRotation</span><span class="token punctuation">(</span>Vector3<span class="token punctuation">.</span>forward<span class="token punctuation">)</span><span class="token punctuation">,</span>
            size<span class="token punctuation">,</span>
            EventType<span class="token punctuation">.</span>Repaint
        <span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img src="img/SphereHandleCap.png" alt="SphereHandleCap"></p>
<p>&#x9664;&#x4E86;&#x4EE5;&#x4E0A;&#x4E09;&#x79CD;&#xFF0C;&#x8FD9;&#x91CC;&#x518D;&#x63D0;&#x4E00;&#x4E0B;&#x51E0;&#x4E2A;&#x7279;&#x6B8A;&#x7684;&#x51FD;&#x6570;&#x3002;</p>
<p><code>BeginGUI()</code> &#x548C; <code>EndGUI()</code> &#x5728;&#x8FD9;&#x4E24;&#x4E2A;&#x51FD;&#x6570;&#x4E4B;&#x95F4;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5229;&#x7528;<code>EditorGUI</code>&#x548C;<code>GUI</code>&#x5BF9; Scene &#x9762;&#x677F;&#x8FDB;&#x884C;&#x5F00;&#x53D1;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CustomEditor</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">HandlerClass</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HandlerClassEditor</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Editor</span></span>
<span class="token punctuation">{</span> 
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnSceneGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span> 
        Handles<span class="token punctuation">.</span><span class="token function">BeginGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        EditorGUILayout<span class="token punctuation">.</span><span class="token function">BeginHorizontal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>GUILayout<span class="token punctuation">.</span><span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">&quot;Click Here&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;&#x51B2;&#x51B2;&#x51B2;&#xFF01;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        EditorGUILayout<span class="token punctuation">.</span><span class="token function">EndHorizontal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Handles<span class="token punctuation">.</span><span class="token function">EndGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img src="img/HandlesBeginGUI.png" alt="HandlesBeginGUI"></p>
<h3 id="gizmos">Gizmos<div id="Gizmos"></div></h3>
<p>Gizmos &#x7528;&#x4E8E;&#x5728;&#x573A;&#x666F;&#x89C6;&#x56FE;&#x63D0;&#x4F9B;&#x53EF;&#x89C6;&#x5316;&#x7684;&#x8C03;&#x8BD5;&#x4E0E;&#x5E2E;&#x52A9;&#x3002;</p>
<p>&#x6240;&#x6709;&#x56FE;&#x6807;&#x90FD;&#x9700;&#x8981;&#x653E;&#x7F6E;&#x5728;Gizmos&#x6587;&#x4EF6;&#x5939;&#x4E2D;&#xFF0C;&#x624D;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x6240;&#x6709;&#x5173;&#x4E8E;GIzmos&#x7684;&#x7ED8;&#x56FE;&#x90FD;&#x5FC5;&#x987B;&#x5728;<code>OnDrawGizmos</code>&#x548C;<code>OnDrawGizmosSelected</code>&#x51FD;&#x6570;&#x4E2D;&#x5B9E;&#x73B0;&#xFF0C;&#x5176;&#x4E2D;<code>OnDrawGizmos</code>&#x4F1A;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x4E0D;&#x65AD;&#x6267;&#x884C;&#xFF0C;&#x800C;&#x7F16;&#x8F91;&#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;&#x53EA;&#x5728;Scene&#x4E2D;&#x89E6;&#x53D1;Event&#x624D;&#x4F1A;&#x6267;&#x884C;&#x3002;<code>OnDrawGizmosSelected</code>&#x4F1A;&#x5728;&#x7269;&#x4F53;&#x9009;&#x4E2D;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#x6267;&#x884C;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OnDrawGizmosClass</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span> 
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnDrawGizmos</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span> 
        Gizmos<span class="token punctuation">.</span><span class="token function">DrawIcon</span><span class="token punctuation">(</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">,</span> <span class="token string">&quot;state_lightningroar.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnDrawGizmosSelected</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img src="img/DrawIcon.png" alt="DrawIcon"></p>
<p>&#x9664;&#x4E86;&#x7ED8;&#x5236;&#x56FE;&#x6807;&#x4E4B;&#x5916;&#xFF0C;Gizmos&#x8FD8;&#x63D0;&#x4F9B;&#x4E00;&#x4E9B;&#x7B80;&#x5355;&#x56FE;&#x6807;&#x7684;&#x7ED8;&#x5236;&#x3002;</p>
<p><img src="img/GizmosAPI.png" alt="GizmosAPI"></p>
<h2 id="&#x81EA;&#x5B9A;&#x4E49;preview&#x9762;&#x677F;">&#x81EA;&#x5B9A;&#x4E49;Preview&#x9762;&#x677F;<div id="&#x81EA;&#x5B9A;&#x4E49;Preview&#x9762;&#x677F;"></div></h2>
<h3 id="editor&#x4E0E;objectpreview">Editor&#x4E0E;ObjectPreview<div id="Editor&#x4E0E;ObjectPreview"></div></h3>
<p>&#x60F3;&#x8981;&#x8C03;&#x51FA;Preview&#x9762;&#x677F;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x53EA;&#x8981;&#x5B9E;&#x73B0;<code>UnityEditor.IPreviwable</code>&#x63A5;&#x53E3;&#x5185;&#x5BB9;&#x5C31;&#x884C;&#x4E86;&#x3002;&#x6240;&#x4EE5;&#x76EE;&#x524D;&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#x4F9B;&#x6211;&#x4EEC;&#x9009;&#x62E9;&#xFF0C;&#x4E00;&#x662F;&#x7EE7;&#x627F;<code>Editor</code>&#xFF0C;&#x4E8C;&#x662F;&#x7EE7;&#x627F;<code>ObjectPreview</code>&#xFF0C;&#x524D;&#x8005;&#x5B9E;&#x9645;&#x4E0A;&#x5305;&#x542B;&#x540E;&#x8005;&#x7684;&#x5168;&#x90E8;&#x5185;&#x5BB9;&#x3002;&#x4E0D;&#x8FC7;&#xFF0C;&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x5148;&#x770B;&#x4E00;&#x4E0B;&#x540E;&#x8005;&#x7684;&#x5199;&#x6CD5;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CustomPreview</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MeshFilter</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyPreview</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ObjectPreview</span></span>
<span class="token punctuation">{</span>
    <span class="token comment">// &#x5FC5;&#x987B;&#x8FD4;&#x56DE;true&#xFF0C;preview&#x7A97;&#x53E3;&#x624D;&#x51FA;&#x6765;</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">HasPreviewGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// &#x8BBE;&#x7F6E;&#x6807;&#x9898;</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name">GUIContent</span> <span class="token function">GetPreviewTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GUIContent</span><span class="token punctuation">(</span><span class="token string">&quot;Preview&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// &#x9884;&#x89C8;&#x7A97;&#x53E3;&#x8BBE;&#x7F6E;&#x9009;&#x9879;</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnPreviewSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        GUILayout<span class="token punctuation">.</span><span class="token function">Label</span><span class="token punctuation">(</span><span class="token string">&quot;Label&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;preLabel&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>GUILayout<span class="token punctuation">.</span><span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">&quot;Button&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;preButton&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;Click!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// &#x7ED8;&#x5236;preview&#x7A97;&#x53E3;</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnPreviewGUI</span><span class="token punctuation">(</span><span class="token class-name">Rect</span> r<span class="token punctuation">,</span> <span class="token class-name">GUIStyle</span> background<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        GUI<span class="token punctuation">.</span><span class="token function">Label</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> target<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot; is being previewed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img src="img/MeshPreview.png" alt="MeshPreview"></p>
<p>&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x6269;&#x5C55;&#x4E86;<code>MeshFilter</code>&#x8FD9;&#x4E2A;&#x7EC4;&#x4EF6;&#xFF0C;&#x53EA;&#x8981;&#x6709;&#x7269;&#x4F53;&#x6302;&#x6709;&#x8FD9;&#x4E2A;&#x7EC4;&#x4EF6;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x8C03;&#x51FA;&#x9884;&#x89C8;&#x7A97;&#x53E3;&#x3002;</p>
<p>&#x503C;&#x5F97;&#x6CE8;&#x610F;&#x7684;&#x662F;<code>ObjectPreview</code>&#x5E76;&#x4E0D;&#x62E5;&#x6709;&#x4F8B;&#x5982;<code>OnDisable()</code>&#x7B49;&#x51FD;&#x6570;&#xFF0C;&#x4E0D;&#x80FD;&#x5728;&#x9500;&#x6BC1;&#x65F6;&#x5BF9;&#x8D44;&#x6E90;&#x8FDB;&#x884C;&#x6E05;&#x7406;&#xFF0C;&#x8FD9;&#x6CE8;&#x5B9A;&#x7EE7;&#x627F;<code>ObjectPreview</code>&#x53EA;&#x80FD;&#x7528;&#x6765;&#x663E;&#x793A;&#x7B80;&#x5355;&#x7684;&#x6587;&#x672C;&#x4FE1;&#x606F;&#xFF0C;&#x6240;&#x4EE5;&#x60F3;&#x8981;&#x5B9E;&#x73B0;&#x4EA4;&#x4E92;&#x7B49;&#x590D;&#x6742;&#x64CD;&#x4F5C;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x7684;&#x6211;&#x4EEC;&#x8FD8;&#x5F97;&#x7528;<code>Editor</code>&#x3002;</p>
<p>&#x90A3;&#x4E48;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x5728;&#x8FD9;&#x91CC;&#x663E;&#x793A;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x4EA4;&#x4E92;&#x7684;&#x9884;&#x89C8;&#x7A97;&#x53E3;&#x8BE5;&#x600E;&#x4E48;&#x505A;&#xFF1F;</p>
<p>&#x6211;&#x4EEC;&#x7EE7;&#x7EED;&#x6765;&#x770B;Unity&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x5B9A;&#x4F4D;&#x5230;<code>UnityEditor.GameObjectInspector</code>&#xFF0C;&#x5EB7;&#x5EB7;&#x4ED6;&#x4EEC;&#x662F;&#x600E;&#x4E48;&#x505A;&#x7684;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">namespace</span> <span class="token namespace">UnityEditor</span>
<span class="token punctuation">{</span> 
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CanEditMultipleObjects</span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CustomEditor</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">GameObject</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">internal</span> <span class="token keyword">class</span> <span class="token class-name">GameObjectInspector</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Editor</span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnPreviewGUI</span><span class="token punctuation">(</span><span class="token class-name">Rect</span> r<span class="token punctuation">,</span> <span class="token class-name">GUIStyle</span> background<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// &#x5224;&#x65AD;&#x786C;&#x4EF6;&#x662F;&#x5426;&#x652F;&#x6301;&#x6750;&#x8D28;&#x6E32;&#x67D3;</span>
            <span class="token class-name"><span class="token keyword">bool</span></span> flag <span class="token operator">=</span> <span class="token operator">!</span>ShaderUtil<span class="token punctuation">.</span>hardwareSupportsRectRenderTexture<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
            <span class="token keyword">else</span>
            <span class="token punctuation">{</span>
                <span class="token comment">// &#x83B7;&#x53D6;&#x62D6;&#x62FD;&#x5411;&#x91CF;</span>
                <span class="token class-name">Vector2</span> vector <span class="token operator">=</span> PreviewGUI<span class="token punctuation">.</span><span class="token function">Drag2D</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>m_PreviewDir<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token range operator">..</span><span class="token punctuation">.</span>
                <span class="token class-name"><span class="token keyword">bool</span></span> flag4 <span class="token operator">=</span> Event<span class="token punctuation">.</span>current<span class="token punctuation">.</span>type <span class="token operator">!=</span> EventType<span class="token punctuation">.</span>Repaint<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag4<span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token range operator">..</span><span class="token punctuation">.</span>
                    <span class="token class-name">PreviewRenderUtility</span> renderUtility <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">GetPreviewData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>renderUtility<span class="token punctuation">;</span>
                    <span class="token comment">// &#x4ECE;cache&#x4E2D;&#x53D6;&#x503C;</span>
                    <span class="token class-name"><span class="token keyword">bool</span></span> flag6 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>m_PreviewCache<span class="token punctuation">.</span><span class="token function">TryGetValue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>referenceTargetIndex<span class="token punctuation">,</span> <span class="token keyword">out</span> texture<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag6<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
                    <span class="token keyword">else</span>
                    <span class="token punctuation">{</span>
                        <span class="token comment">// &#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53EA;&#x7B80;&#x5355;&#x5173;&#x5FC3;&#x6CA1;&#x6709;cache&#x7684;&#x60C5;&#x51B5;</span>
                        renderUtility<span class="token punctuation">.</span><span class="token function">BeginPreview</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> background<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">DoRenderPreview</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        renderUtility<span class="token punctuation">.</span><span class="token function">EndAndDrawPreview</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token range operator">..</span><span class="token punctuation">.</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> 
        <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DoRenderPreview</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name">GameObjectInspector<span class="token punctuation">.</span>PreviewData</span> previewData <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">GetPreviewData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Bounds</span> bounds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Bounds</span><span class="token punctuation">(</span>previewData<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">,</span> Vector3<span class="token punctuation">.</span>zero<span class="token punctuation">)</span><span class="token punctuation">;</span>
            GameObjectInspector<span class="token punctuation">.</span><span class="token function">GetRenderableBoundsRecurse</span><span class="token punctuation">(</span><span class="token keyword">ref</span> bounds<span class="token punctuation">,</span> previewData<span class="token punctuation">.</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">float</span></span> num <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span>bounds<span class="token punctuation">.</span>extents<span class="token punctuation">.</span>magnitude<span class="token punctuation">,</span> <span class="token number">0.0001f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">float</span></span> num2 <span class="token operator">=</span> num <span class="token operator">*</span> <span class="token number">3.8f</span><span class="token punctuation">;</span>
            <span class="token class-name">Quaternion</span> quaternion <span class="token operator">=</span> Quaternion<span class="token punctuation">.</span><span class="token function">Euler</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token keyword">this</span><span class="token punctuation">.</span>m_PreviewDir<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token keyword">this</span><span class="token punctuation">.</span>m_PreviewDir<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Vector3</span> position <span class="token operator">=</span> bounds<span class="token punctuation">.</span>center <span class="token operator">-</span> quaternion <span class="token operator">*</span> <span class="token punctuation">(</span>Vector3<span class="token punctuation">.</span>forward <span class="token operator">*</span> num2<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// &#x8BBE;&#x7F6E;&#x76F8;&#x673A;&#x6570;&#x636E;</span>
            previewData<span class="token punctuation">.</span>renderUtility<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">=</span> position<span class="token punctuation">;</span>
            previewData<span class="token punctuation">.</span>renderUtility<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>rotation <span class="token operator">=</span> quaternion<span class="token punctuation">;</span>
            previewData<span class="token punctuation">.</span>renderUtility<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>nearClipPlane <span class="token operator">=</span> num2 <span class="token operator">-</span> num <span class="token operator">*</span> <span class="token number">1.1f</span><span class="token punctuation">;</span>
            previewData<span class="token punctuation">.</span>renderUtility<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>farClipPlane <span class="token operator">=</span> num2 <span class="token operator">+</span> num <span class="token operator">*</span> <span class="token number">1.1f</span><span class="token punctuation">;</span>
            <span class="token comment">// &#x8BBE;&#x7F6E;&#x5149;&#x6E90;&#x6570;&#x636E;</span>
            previewData<span class="token punctuation">.</span>renderUtility<span class="token punctuation">.</span>lights<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>intensity <span class="token operator">=</span> <span class="token number">0.7f</span><span class="token punctuation">;</span>
            previewData<span class="token punctuation">.</span>renderUtility<span class="token punctuation">.</span>lights<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>transform<span class="token punctuation">.</span>rotation <span class="token operator">=</span> quaternion <span class="token operator">*</span> Quaternion<span class="token punctuation">.</span><span class="token function">Euler</span><span class="token punctuation">(</span><span class="token number">40f</span><span class="token punctuation">,</span> <span class="token number">40f</span><span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            previewData<span class="token punctuation">.</span>renderUtility<span class="token punctuation">.</span>lights<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>intensity <span class="token operator">=</span> <span class="token number">0.7f</span><span class="token punctuation">;</span>
            previewData<span class="token punctuation">.</span>renderUtility<span class="token punctuation">.</span>lights<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>transform<span class="token punctuation">.</span>rotation <span class="token operator">=</span> quaternion <span class="token operator">*</span> Quaternion<span class="token punctuation">.</span><span class="token function">Euler</span><span class="token punctuation">(</span><span class="token number">340f</span><span class="token punctuation">,</span> <span class="token number">218f</span><span class="token punctuation">,</span> <span class="token number">177f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            previewData<span class="token punctuation">.</span>renderUtility<span class="token punctuation">.</span>ambientColor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Color</span><span class="token punctuation">(</span><span class="token number">0.1f</span><span class="token punctuation">,</span> <span class="token number">0.1f</span><span class="token punctuation">,</span> <span class="token number">0.1f</span><span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// &#x6E32;&#x67D3;</span>
            previewData<span class="token punctuation">.</span>renderUtility<span class="token punctuation">.</span><span class="token function">Render</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x6E90;&#x7801;&#x6BD4;&#x8F83;&#x957F;&#xFF0C;&#x6211;&#x53EA;&#x622A;&#x53D6;&#x4E86;&#x5173;&#x952E;&#x90E8;&#x5206;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x4ECE;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x5236;&#x4F5C;&#x53EF;&#x4EA4;&#x4E92;&#x7684;&#x9884;&#x89C8;&#x7A97;&#x53E3;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x4E24;&#x6B65;&#xFF0C;&#x4E00;&#x662F;&#x83B7;&#x53D6;&#x62D6;&#x62FD;&#x5411;&#x91CF;&#xFF0C;&#x4E8C;&#x662F;&#x5229;&#x7528;<code>PreviewRenderUtility</code>&#x8F85;&#x52A9;&#x7C7B;&#x8FDB;&#x884C;&#x6E32;&#x67D3;&#x7ED8;&#x5236;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x7A0D;&#x5FAE;&#x770B;&#x4E00;&#x4E0B;<code>PreviewRenderUtility</code>&#x7684;&#x76F8;&#x5173;API&#x5C31;&#x53EF;&#x4EE5;&#x5F00;&#x5E72;&#x4E86;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">CustomEditor</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MeshFilter</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyPreview</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Editor</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">PreviewRenderUtility</span> m_PreviewRenderUtility<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">MeshFilter</span> m_MeshFilter<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">bool</span></span> m_Loaded <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Vector2</span> m_Drag<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnDisable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span> 
        <span class="token keyword">if</span> <span class="token punctuation">(</span>m_PreviewRenderUtility <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// &#x5FC5;&#x987B;&#x8FDB;&#x884C;&#x6E05;&#x7406;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x5B58;&#x5728;&#x6B8B;&#x7559;&#x5BF9;&#x8C61;</span>
            m_PreviewRenderUtility<span class="token punctuation">.</span><span class="token function">Cleanup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m_PreviewRenderUtility <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>     
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">HasPreviewGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// &#x521D;&#x59CB;&#x5316;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>m_PreviewRenderUtility <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> m_PreviewRenderUtility <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">PreviewRenderUtility</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        m_MeshFilter <span class="token operator">=</span> target <span class="token keyword">as</span> <span class="token class-name">MeshFilter</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnPreviewGUI</span><span class="token punctuation">(</span><span class="token class-name">Rect</span> r<span class="token punctuation">,</span> <span class="token class-name">GUIStyle</span> background<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// m_Loaded    &#x786E;&#x4FDD;&#x53EA;&#x52A0;&#x8F7D;&#x4E00;&#x6B21;&#x7269;&#x4F53;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>m_Loaded<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// AddSingleGO &#x6DFB;&#x52A0;&#x7269;&#x4F53;</span>
            m_PreviewRenderUtility<span class="token punctuation">.</span><span class="token function">AddSingleGO</span><span class="token punctuation">(</span>GameObject<span class="token punctuation">.</span><span class="token function">Instantiate</span><span class="token punctuation">(</span>m_MeshFilter<span class="token punctuation">.</span>gameObject<span class="token punctuation">,</span> Vector3<span class="token punctuation">.</span>zero<span class="token punctuation">,</span> Quaternion<span class="token punctuation">.</span>identity<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m_Loaded <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// &#x83B7;&#x53D6;&#x62D6;&#x62FD;&#x5411;&#x91CF;</span>
        m_Drag <span class="token operator">=</span> <span class="token function">Drag2D</span><span class="token punctuation">(</span>m_Drag<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token comment">// &#x4E8B;&#x4EF6;&#x4E3A;&#x7ED8;&#x5236;&#x65F6;&#xFF0C;&#x624D;&#x8FDB;&#x884C;&#x7ED8;&#x5236;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Event<span class="token punctuation">.</span>current<span class="token punctuation">.</span>type <span class="token operator">==</span> EventType<span class="token punctuation">.</span>Repaint<span class="token punctuation">)</span>
        <span class="token punctuation">{</span> 
            m_PreviewRenderUtility<span class="token punctuation">.</span><span class="token function">BeginPreview</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> background<span class="token punctuation">)</span><span class="token punctuation">;</span>   
            <span class="token comment">//&#x8C03;&#x6574;&#x76F8;&#x673A;&#x4F4D;&#x7F6E;&#x4E0E;&#x89D2;&#x5EA6;</span>
            m_PreviewRenderUtility<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">=</span> Vector2<span class="token punctuation">.</span>zero<span class="token punctuation">;</span>
            m_PreviewRenderUtility<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>rotation <span class="token operator">=</span> Quaternion<span class="token punctuation">.</span><span class="token function">Euler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3</span><span class="token punctuation">(</span><span class="token operator">-</span>m_Drag<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token operator">-</span>m_Drag<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m_PreviewRenderUtility<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">=</span> m_PreviewRenderUtility<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>forward <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">6f</span><span class="token punctuation">;</span>
            <span class="token comment">// &#x76F8;&#x673A;&#x6E32;&#x67D3;</span>
            m_PreviewRenderUtility<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">Render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token comment">// &#x7ED3;&#x675F;&#x5E76;&#x7ED8;&#x5236;</span>
            m_PreviewRenderUtility<span class="token punctuation">.</span><span class="token function">EndAndDrawPreview</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Drag2D &#x6765;&#x81EA;&#x6E90;&#x7801;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name"><span class="token keyword">int</span></span> sliderHash <span class="token operator">=</span> <span class="token string">&quot;Slider&quot;</span><span class="token punctuation">.</span><span class="token function">GetHashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Vector2</span> <span class="token function">Drag2D</span><span class="token punctuation">(</span><span class="token class-name">Vector2</span> scrollPosition<span class="token punctuation">,</span> <span class="token class-name">Rect</span> position<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// &#x6BCF;&#x6B21;&#x83B7;&#x5F97;&#x72EC;&#x4E00;&#x65E0;&#x4E8C;&#x7684; controlID</span>
        <span class="token class-name"><span class="token keyword">int</span></span> controlID <span class="token operator">=</span> GUIUtility<span class="token punctuation">.</span><span class="token function">GetControlID</span><span class="token punctuation">(</span>sliderHash<span class="token punctuation">,</span> FocusType<span class="token punctuation">.</span>Passive<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Event</span> current <span class="token operator">=</span> Event<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
        <span class="token comment">// &#x83B7;&#x53D6;&#x5BF9;&#x5E94; controlID &#x7684;&#x4E8B;&#x4EF6;</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span><span class="token function">GetTypeForControl</span><span class="token punctuation">(</span>controlID<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">case</span> EventType<span class="token punctuation">.</span>MouseDown<span class="token punctuation">:</span>
                <span class="token punctuation">{</span>
                    <span class="token class-name"><span class="token keyword">bool</span></span> flag <span class="token operator">=</span> position<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span>mousePosition<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> position<span class="token punctuation">.</span>width <span class="token operator">&gt;</span> <span class="token number">50f</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span>
                    <span class="token punctuation">{</span>
                        <span class="token comment">// &#x9F20;&#x6807;&#x6441;&#x4F4F;&#x62D6;&#x51FA;&#x9884;&#x89C8;&#x7A97;&#x53E3;&#x5916;&#xFF0C;&#x9884;&#x89C8;&#x7269;&#x4F53;&#x4EFB;&#x7136;&#x80FD;&#x591F;&#x65CB;&#x8F6C;</span>
                        GUIUtility<span class="token punctuation">.</span>hotControl <span class="token operator">=</span> controlID<span class="token punctuation">;</span>
                        <span class="token comment">// &#x91C7;&#x7528;&#x4E8B;&#x4EF6;</span>
                        current<span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">// &#x8BA9;&#x9F20;&#x6807;&#x53EF;&#x4EE5;&#x62D6;&#x52A8;&#x5230;&#x5C4F;&#x5E55;&#x5916;&#x540E;&#xFF0C;&#x4ECE;&#x53E6;&#x4E00;&#x8FB9;&#x51FA;&#x6765;</span>
                        EditorGUIUtility<span class="token punctuation">.</span><span class="token function">SetWantsMouseJumping</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token keyword">case</span> EventType<span class="token punctuation">.</span>MouseUp<span class="token punctuation">:</span>
                <span class="token punctuation">{</span>
                    <span class="token class-name"><span class="token keyword">bool</span></span> flag2 <span class="token operator">=</span> GUIUtility<span class="token punctuation">.</span>hotControl <span class="token operator">==</span> controlID<span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag2<span class="token punctuation">)</span>
                    <span class="token punctuation">{</span>
                        GUIUtility<span class="token punctuation">.</span>hotControl <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    EditorGUIUtility<span class="token punctuation">.</span><span class="token function">SetWantsMouseJumping</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token keyword">case</span> EventType<span class="token punctuation">.</span>MouseDrag<span class="token punctuation">:</span>
                <span class="token punctuation">{</span>
                    <span class="token class-name"><span class="token keyword">bool</span></span> flag3 <span class="token operator">=</span> GUIUtility<span class="token punctuation">.</span>hotControl <span class="token operator">==</span> controlID<span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag3<span class="token punctuation">)</span>
                    <span class="token punctuation">{</span>
                        <span class="token comment">// shift &#x52A0;&#x901F;</span>
                        scrollPosition <span class="token operator">-=</span> current<span class="token punctuation">.</span>delta <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span>shift <span class="token punctuation">?</span> <span class="token number">3</span> <span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> Mathf<span class="token punctuation">.</span><span class="token function">Min</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>width<span class="token punctuation">,</span> position<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">140f</span><span class="token punctuation">;</span>
                        <span class="token comment">// &#x4EE5;&#x4E0B;&#x4E24;&#x6761;&#x7F3A;&#x5C11;&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x5EF6;&#x8FDF;&#x66F4;&#x65B0;,&#x62D6;&#x52A8;&#x8FC7;&#x7A0B;&#x4E2D;&#x65E0;&#x6CD5;&#x5B9E;&#x65F6;&#x66F4;&#x65B0;</span>
                        <span class="token comment">// &#x76F4;&#x5230; repaint&#x4E8B;&#x4EF6;&#x89E6;&#x53D1;&#x624D;&#x91CD;&#x65B0;&#x7ED8;&#x5236;</span>
                        current<span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        GUI<span class="token punctuation">.</span>changed <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> scrollPosition<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x8FD9;&#x91CC;&#x6211;&#x6CA1;&#x6709;&#x6DFB;&#x52A0;&#x5149;&#x6E90;&#xFF0C;&#x6240;&#x4EE5;&#x9884;&#x89C8;&#x7A97;&#x53E3;&#x5F88;&#x6697;&#x3002;</p>
<p><img src="img/Preview.png" alt="Preview"></p>
<p>&#x8FD9;&#x91CC;&#x6211;&#x7B80;&#x5355;&#x63D0;&#x4E00;&#x4E0B;<code>Drag2D()</code>&#x4E2D;&#x7684;<code>hotControl</code>&#x548C;<code>Use()</code>&#x3002;</p>
<p><code>GUIUtility.hotControl</code>&#xFF1A;&#x70ED;&#x63A7;&#x5236;ID&#xFF0C;&#x8FD9;&#x91CC;&#x4F1A;&#x8BB0;&#x5F55;&#x5F53;&#x524D;&#x6240;&#x64CD;&#x4F5C;&#x7684;&#x63A7;&#x4EF6;ID&#xFF0C;&#x5E76;&#x8BA9;&#x63A7;&#x4EF6;&#x8FDB;&#x5165;&#x70ED;&#x72B6;&#x6001;&#xFF0C;&#x4E0D;&#x5141;&#x8BB8;&#x5176;&#x4ED6;&#x63A7;&#x4EF6;&#x54CD;&#x5E94;&#x9F20;&#x6807;&#x4E8B;&#x4EF6;&#x3002;&#x4E00;&#x65E6;&#x7528;&#x6237; mouseup&#xFF0C;&#x8BE5;&#x63A7;&#x4EF6;&#x5C06; hotControl &#x8BBE;&#x7F6E;&#x4E3A;0&#xFF0C;&#x4EE5;&#x6307;&#x793A;&#x5176;&#x4ED6;&#x63A7;&#x4EF6;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x54CD;&#x5E94;&#x7528;&#x6237;&#x8F93;&#x5165;&#x3002;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x7684;&#x5177;&#x4F53;&#x4F5C;&#x7528;&#x4E3A;&#x9F20;&#x6807;&#x6441;&#x4F4F;&#x62D6;&#x51FA;&#x9884;&#x89C8;&#x7A97;&#x53E3;&#x5916;&#xFF0C;&#x9884;&#x89C8;&#x7269;&#x4F53;&#x4EFB;&#x7136;&#x80FD;&#x591F;&#x65CB;&#x8F6C;&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x88AB;&#x5176;&#x4ED6;&#x63A7;&#x4EF6;&#x6240;&#x6355;&#x83B7;&#x3002;</p>
<p><code>Event.Use()</code>&#xFF1A;&#x5728;&#x4F7F;&#x7528;&#x4E8B;&#x4EF6;&#x65F6;&#x8C03;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#x3002;&#x4E8B;&#x4EF6;&#x7684;&#x7C7B;&#x578B;&#x5C06;&#x91CD;&#x7F6E;&#x4E3A; <code>EventType.Used</code>&#xFF0C;&#x4F7F;&#x5176;&#x4ED6; GUI &#x5143;&#x7D20;&#x5FFD;&#x7565;&#x5B83;&#x3002;&#x5982;&#x679C;&#x5BF9;<code>EventType.Repaint</code> &#x548C; <code>EventType.Layout</code>&#x4F7F;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#xFF0C;&#x5C06;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#x3002;</p>
<h2 id="&#x81EA;&#x5B9A;&#x4E49;attribute&#x7279;&#x6027;">&#x81EA;&#x5B9A;&#x4E49;Attribute&#x7279;&#x6027;<div id="&#x81EA;&#x5B9A;&#x4E49;Attribute&#x7279;&#x6027;"></div></h2>
<h3 id="propertydrawer">PropertyDrawer<div id="PropertyDrawer"></div></h3>
<p>&#x4ECE;<code>PropertyDrawer</code>&#x6D3E;&#x751F;&#x51FA;&#x6765;&#x7684;&#x5B50;&#x7C7B;&#x62E5;&#x6709;&#x4E24;&#x79CD;&#x7528;&#x9014;&#xFF1A;</p>
<ul>
<li>&#x5B9A;&#x5236;&#x4E00;&#x4E2A;<code>Serializable class</code> &#x7684;<code>GUI</code>&#x9762;&#x677F;</li>
<li>&#x5B9A;&#x5236;&#x4E00;&#x4E2A;<code>Attribute</code>&#x7279;&#x6027;</li>
</ul>
<p>&#x4E4B;&#x524D;&#x8BF4;&#x4E86;&#x7B2C;&#x4E00;&#x79CD;&#x7528;&#x9014;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x6765;&#x8BF4;&#x8BF4;&#x7B2C;&#x4E8C;&#x4E2A;&#x7528;&#x9014;&#x2014;&#x2014;&#x81EA;&#x5B9A;&#x4E49;&#x7279;&#x6027;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token comment">// MyRangeAttribute.cs</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRangeAttribute</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">PropertyAttribute</span></span>
<span class="token punctuation">{</span> 
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> min<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> max<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token function">MyRangeAttribute</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> min<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">float</span></span> max<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>min <span class="token operator">=</span> min<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>max <span class="token operator">=</span> max<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// MyRangeDrawer.cs</span>
<span class="token punctuation">[</span><span class="token function">CustomPropertyDrawer</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MyRangeAttribute</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRangeDrawer</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">PropertyDrawer</span></span>
<span class="token punctuation">{</span> 
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">float</span></span> <span class="token function">GetPropertyHeight</span><span class="token punctuation">(</span><span class="token class-name">SerializedProperty</span> property<span class="token punctuation">,</span> <span class="token class-name">GUIContent</span> label<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// &#x9ED8;&#x8BA4;&#x4E3A;&#x4E00;&#x884C;&#x7684;&#x9AD8;&#x5EA6;</span>
        <span class="token keyword">return</span> <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">GetPropertyHeight</span><span class="token punctuation">(</span>property<span class="token punctuation">,</span> label<span class="token punctuation">)</span> <span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnGUI</span><span class="token punctuation">(</span><span class="token class-name">Rect</span> position<span class="token punctuation">,</span> <span class="token class-name">SerializedProperty</span> property<span class="token punctuation">,</span> <span class="token class-name">GUIContent</span> label<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// attribute &#x6765;&#x81EA;&#x7236;&#x7C7B;&#xFF0C;&#x53EF;&#x83B7;&#x53D6;&#x8981;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x7279;&#x6027;&#x7C7B;</span>
        <span class="token class-name">MyRangeAttribute</span> range <span class="token operator">=</span> attribute <span class="token keyword">as</span> <span class="token class-name">MyRangeAttribute</span><span class="token punctuation">;</span> 
        <span class="token keyword">if</span> <span class="token punctuation">(</span>property<span class="token punctuation">.</span>propertyType <span class="token operator">==</span> SerializedPropertyType<span class="token punctuation">.</span>Float<span class="token punctuation">)</span>
            EditorGUI<span class="token punctuation">.</span><span class="token function">Slider</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> property<span class="token punctuation">,</span> range<span class="token punctuation">.</span>min<span class="token punctuation">,</span> range<span class="token punctuation">.</span>max<span class="token punctuation">,</span> label<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>property<span class="token punctuation">.</span>propertyType <span class="token operator">==</span> SerializedPropertyType<span class="token punctuation">.</span>Integer<span class="token punctuation">)</span>
            EditorGUI<span class="token punctuation">.</span><span class="token function">IntSlider</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> property<span class="token punctuation">,</span> Convert<span class="token punctuation">.</span><span class="token function">ToInt32</span><span class="token punctuation">(</span>range<span class="token punctuation">.</span>min<span class="token punctuation">)</span><span class="token punctuation">,</span> Convert<span class="token punctuation">.</span><span class="token function">ToInt32</span><span class="token punctuation">(</span>range<span class="token punctuation">.</span>max<span class="token punctuation">)</span><span class="token punctuation">,</span> label<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            EditorGUI<span class="token punctuation">.</span><span class="token function">LabelField</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> label<span class="token punctuation">.</span>text<span class="token punctuation">,</span> <span class="token string">&quot;Use Range with float or int.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x6240;&#x6709;&#x81EA;&#x5B9A;&#x4E49;&#x7279;&#x6027;&#x5FC5;&#x987B;&#x7EE7;&#x627F;&#x81EA;<code>PropertyAttribute</code>&#x7C7B;&#xFF0C;&#x5E76;&#x4E14;<strong>&#x5FC5;&#x987B;</strong>&#x4EE5;<code>Attribute</code>&#x7ED3;&#x5C3E;&#x3002;</p>
<p><code>OnGUI(Rect position, SerializedProperty property, GUIContent label)</code>&#xFF1A;&#x5B9E;&#x9645;&#x7ED8;&#x5236;&#x7684;&#x5185;&#x5BB9;&#x90FD;&#x5305;&#x542B;&#x5728;&#x6B64;&#x51FD;&#x6570;&#x4E2D;&#x3002;</p>
<ul>
<li><code>positon</code>&#xFF1A;&#x6839;&#x636E;<code>GetPropertyHeight</code>&#x51FD;&#x6570;&#x83B7;&#x53D6;&#x9AD8;&#x5EA6;&#x540E;&#xFF0C;&#x8BA1;&#x7B97;&#x51FA;&#x6765;&#x63A7;&#x4EF6;&#x9700;&#x8981;&#x5360;&#x636E;&#x7684;&#x8303;&#x56F4;&#x5927;&#x5C0F;&#x3002;</li>
<li><code>property</code>&#xFF1A;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x6307;&#x793A;&#x8981;&#x5C55;&#x793A;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x5C5E;&#x6027;&#xFF0C;&#x8FD9;&#x91CC;&#x6307;&#x7D27;&#x8D34;<code>[MyRange]</code>&#x7279;&#x6027;&#x7684;&#x5173;&#x8054;&#x5B57;&#x6BB5;&#x3002;</li>
<li><code>label</code>&#xFF1A;&#x7B2C;&#x4E8C;&#x53C2;&#x6570;&#x6307;&#x793A;&#x8981;&#x5C55;&#x793A;&#x7684;&#x6807;&#x7B7E;&#x5185;&#x5BB9;&#xFF0C;&#x8FD9;&#x91CC;&#x6307;&#x7D27;&#x8D34;<code>[MyRange]</code>&#x7279;&#x6027;&#x7684;&#x5173;&#x8054;&#x5B57;&#x6BB5;&#x540D; &#x3002;</li>
</ul>
<pre class="language-"><code class="lang-csharp"><span class="token comment">// MyRangeTest.cs</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRangeTest</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MyRange</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">float</span></span> num1<span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MyRange</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> num2<span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MyRange</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> num3<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img src="img/MyRangeTest.png" alt="MyRangeTest"></p>
<h3 id="decoratordrawer">DecoratorDrawer<div id="DecoratorDrawer"></div></h3>
<p><code>DecoratorDrawer</code>&#x548C;<code>PropertyDrawer</code>&#x7C7B;&#x4F3C;&#xFF0C;&#x53EA;&#x662F;&#x4ED6;&#x5E76;&#x4E0D;&#x4F1A;&#x7ED8;&#x5236;&#x4E0E;&#x7279;&#x6027;&#x5173;&#x8054;&#x7684;&#x5B57;&#x6BB5;&#xFF0C;&#x5B83;&#x53EA;&#x662F;&#x5BF9;&#x7279;&#x6027;&#x7C7B;<code>PropertyAttribute</code>&#x83B7;&#x53D6;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x7ED8;&#x5236;&#x3002;</p>
<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x7279;&#x6027;&#xFF0C;&#x4F7F;&#x5176;&#x80FD;&#x591F;&#x663E;&#x793A;&#x6307;&#x5B9A;&#x8DEF;&#x5F84;&#x7684;&#x56FE;&#x7247;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token comment">// MyImageAttribute.cs</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyImageAttribute</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">PropertyAttribute</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">string</span></span> path<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token function">MyImageAttribute</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>path <span class="token operator">=</span> path<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// MyImageAttributeDrawer.cs</span>
<span class="token punctuation">[</span><span class="token function">CustomPropertyDrawer</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MyImageAttribute</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyImageAttributeDrawer</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">DecoratorDrawer</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Texture2D</span> image<span class="token punctuation">;</span> 
    <span class="token comment">//&#x4ECE;&#x53C2;&#x6570;&#x6765;&#x770B;&#xFF0C;&#x65E0;&#x6CD5;&#x83B7;&#x53D6;&#x5173;&#x8054;&#x5B57;&#x6BB5;&#x7684;&#x4FE1;&#x606F;</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnGUI</span><span class="token punctuation">(</span><span class="token class-name">Rect</span> position<span class="token punctuation">)</span>
    <span class="token punctuation">{</span> 
        GUI<span class="token punctuation">.</span><span class="token function">DrawTexture</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Rect</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>x<span class="token punctuation">,</span>position<span class="token punctuation">.</span>y<span class="token punctuation">,</span>image<span class="token punctuation">.</span>width<span class="token punctuation">,</span>image<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">,</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
    <span class="token comment">// &#x83B7;&#x53D6;&#x9AD8;&#x5EA6;</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">float</span></span> <span class="token function">GetHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">MyImageAttribute</span> myImageAttribute <span class="token operator">=</span> <span class="token punctuation">(</span>MyImageAttribute<span class="token punctuation">)</span>attribute<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>image <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            image <span class="token operator">=</span> Resources<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Load</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Texture2D<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>myImageAttribute<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">GetHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> image<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// MyImageTest.cs</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyImageTest</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MyImage</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;state_windwalk&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> num<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img src="img/DecoratorDrawer.png" alt="DecoratorDrawer"></p>
<p>&#x867D;&#x7136;<code>DecoratorDrawer</code>&#x4ECE;&#x6982;&#x5FF5;&#x4E0A;&#x4E0D;&#x4E0E;&#x7279;&#x5B9A;&#x5B57;&#x6BB5;&#x5173;&#x8054;&#xFF0C;&#x4F46;&#x5B83;&#x4F7F;&#x7528;&#x65F6;&#x4ECD;&#x7136;&#x9700;&#x8981;&#x653E;&#x7F6E;&#x5728;&#x811A;&#x672C;&#x7684;&#x5B57;&#x6BB5;&#x4E4B;&#x4E0A;&#x3002;&#x4F46;&#x4E0E; <code>PropertyDrawer</code> &#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;&#x5728;&#x540C;&#x4E00;&#x5B57;&#x6BB5;&#x4E0A;&#x9762;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A; <code>DecoratorDrawer</code> &#x5C5E;&#x6027;&#x3002;&#x5982;&#x679C; <code>DecoratorDrawer</code>&#x5C5E;&#x6027;&#x4F4D;&#x4E8E;<code>List</code> &#x6216;&#x6570;&#x7EC4;&#x7684;&#x5B57;&#x6BB5;&#x4E4B;&#x4E0A;&#xFF0C;&#x90A3;&#x4E48; decorator &#x53EA;&#x4F1A;&#x51FA;&#x73B0;&#x5728;&#x6570;&#x7EC4;&#x4E4B;&#x524D;&#x4E00;&#x6B21;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5BF9;&#x4E8E;&#x6BCF;&#x4E2A;&#x6570;&#x7EC4;&#x5143;&#x7D20;&#x90FD;&#x51FA;&#x73B0;&#x3002;</p>
<blockquote>
<p>Although a DecoratorDrawer conceptually is not meant to be associated with a specific field, its attribute still needs to be placed above a field in the script. However, unlike PropertyDrawer attributes, there can be multiple DecoratorDrawers attributes above the same field. Also unlike PropertyDrawers, if a DecoratorDrawer attribute is placed above a field that is a List or an array, the decorator will only show up once before the array; not for every array element.</p>
<p><a href="https://docs.unity.cn/2020.2/Documentation/ScriptReference/DecoratorDrawer.html" target="_blank">https://docs.unity.cn/2020.2/Documentation/ScriptReference/DecoratorDrawer.html</a></p>
</blockquote>
<h2 id="&#x81EA;&#x5B9A;&#x4E49;&#x7A97;&#x53E3;-editorwindow">&#x81EA;&#x5B9A;&#x4E49;&#x7A97;&#x53E3; EditorWindow<div id="&#x81EA;&#x5B9A;&#x4E49;&#x7A97;&#x53E3;EditorWindow"></div></h2>
<p>&#x60F3;&#x8981;&#x5728;Unity&#x4E2D;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x7A97;&#x53E3;&#xFF0C;&#x90FD;&#x9700;&#x8981;&#x7EE7;&#x627F;&#x6B64;&#x7C7B;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token comment">//EditorWindowTest.cs</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EditorWindowTest</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">EditorWindow</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MenuItem</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Example/Display simple Window&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">EditorWindowTest</span> window <span class="token operator">=</span> <span class="token punctuation">(</span>EditorWindowTest<span class="token punctuation">)</span>EditorWindow<span class="token punctuation">.</span><span class="token function">GetWindow</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">EditorWindowTest</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">&quot;My Empty Window&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x5728;&#x9876;&#x90E8;&#x83DC;&#x5355;&#x680F;&#x627E;&#x5230;<code>Example/Display simple Window</code>&#xFF0C;&#x70B9;&#x51FB;&#x5373;&#x53EF;&#x751F;&#x6210;&#x65B0;&#x7A97;&#x53E3;&#x3002;</p>
<p>&#x4F46;&#x6709;&#x4E00;&#x70B9;&#x5F97;&#x6CE8;&#x610F;&#xFF0C;EditorWindow&#x521B;&#x5EFA;&#x65B0;&#x7A97;&#x53E3;&#x662F;&#x901A;&#x8FC7;<code>GetWindow</code>&#x51FD;&#x6570;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x6267;&#x884C;&#x65F6;&#xFF0C;&#x4F1A;&#x68C0;&#x6D4B;&#x6B64;&#x7A97;&#x53E3;&#x662F;&#x5426;&#x6253;&#x5F00;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#xFF0C;&#x521B;&#x5EFA;&#x5E76;&#x663E;&#x793A;&#x65B0;&#x7A97;&#x53E3;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x8BE5;&#x7A97;&#x53E3;&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x5982;&#x679C;&#x6709;&#xFF0C;&#x5C31;&#x91CD;&#x65B0;&#x805A;&#x7126;&#x8BE5;&#x7A97;&#x4F53;&#x3002;</p>
<blockquote>
<p>If there is none, creates and shows new window and returns the instance of it.</p>
<p><a href="https://docs.unity.cn/2020.2/Documentation/ScriptReference/EditorWindow.GetWindow.html" target="_blank">https://docs.unity.cn/2020.2/Documentation/ScriptReference/EditorWindow.GetWindow.html</a></p>
</blockquote>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x91CD;&#x590D;&#x5F39;&#x51FA;&#x7A97;&#x53E3;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x5C01;&#x88C5;&#x7A97;&#x53E3;&#x51FD;&#x6570;&#xFF0C;&#x5E76;&#x5236;&#x5B9A;&#x754C;&#x9762;&#x5C42;&#x7EA7;&#x7BA1;&#x7406;&#x903B;&#x8F91;&#x3002;</p>
<h2 id="&#x6CE8;&#x610F;event&#x4E8B;&#x4EF6;">&#x6CE8;&#x610F;Event&#x4E8B;&#x4EF6;<div id="&#x6CE8;&#x610F;Event&#x4E8B;&#x4EF6;"></div></h2>
<p>&#x65E0;&#x8BBA;&#x662F;<code>OnGUI()</code>&#x8FD8;&#x662F;<code>OnInspectorGUI()</code>&#x90FD;&#x662F;&#x7531;&#x4E8B;&#x4EF6;&#x9A71;&#x52A8;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x6E05;&#x695A;&#x4EC0;&#x4E48;&#x4E8B;&#x4EF6;&#x89E6;&#x53D1;&#x65F6;&#x6267;&#x884C;&#x4EC0;&#x4E48;&#x903B;&#x8F91;&#x3002;</p>
<p>&#x6BD4;&#x5982;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;<code>MyPlayerEditor</code>&#x5BF9;Inspector&#x9762;&#x677F;&#x8FDB;&#x884C;&#x4E86;&#x7ED8;&#x5236;&#xFF0C;&#x6211;&#x4EEC;&#x628A;&#x89E6;&#x53D1;&#x7ED8;&#x5236;&#x7684;&#x4E8B;&#x4EF6;&#x7C7B;&#x578B;&#x6253;&#x5370;&#x51FA;&#x6765;&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token comment">// MyPlayer.cs</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyPlayer</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> armor <span class="token operator">=</span> <span class="token number">75</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> damage <span class="token operator">=</span> <span class="token number">25</span> 
    <span class="token keyword">public</span> <span class="token class-name">GameObject</span> gun<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
<span class="token comment">// MyPlayerEditor.cs</span>
<span class="token punctuation">[</span><span class="token function">CustomEditor</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MyPlayer</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyPlayerEditor</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Editor</span></span>
<span class="token punctuation">{</span> 
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnInspectorGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//&#x67E5;&#x770B;&#x89E6;&#x53D1;&#x7ED8;&#x5236;&#x7684;&#x4E8B;&#x4EF6;&#x7C7B;&#x578B;</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>Event<span class="token punctuation">.</span>current<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// target&#x6765;&#x81EA;&#x7236;&#x7C7B;Editor&#xFF0C;&#x6307;&#x660E;&#x5F53;&#x524D;&#x64CD;&#x4F5C;&#x7684;&#x5BF9;&#x8C61;</span>
        <span class="token class-name">MyPlayer</span> mp <span class="token operator">=</span> <span class="token punctuation">(</span>MyPlayer<span class="token punctuation">)</span>target<span class="token punctuation">;</span> 
        mp<span class="token punctuation">.</span>damage <span class="token operator">=</span> EditorGUILayout<span class="token punctuation">.</span><span class="token function">IntField</span><span class="token punctuation">(</span><span class="token string">&quot;Damage&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mp<span class="token punctuation">.</span>armor <span class="token operator">=</span> EditorGUILayout<span class="token punctuation">.</span><span class="token function">IntSlider</span><span class="token punctuation">(</span><span class="token string">&quot;Armor&quot;</span><span class="token punctuation">,</span> mp<span class="token punctuation">.</span>armor<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        serializedObject<span class="token punctuation">.</span><span class="token function">ApplyModifiedProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x6211;&#x4EEC;&#x4EE5;&#x6781;&#x5FEB;&#x7684;&#x901F;&#x5EA6;&#xFF0C;&#x5C06;&#x9F20;&#x6807;&#x79FB;&#x5165;<code>inspector</code>&#x533A;&#x57DF;&#xFF0C;&#x53C8;&#x8FC5;&#x901F;&#x9000;&#x51FA;&#x6765;&#x3002;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x6765;&#xFF0C;&#x8FD9;&#x91CC;&#x81F3;&#x5C11;&#x89E6;&#x53D1;&#x4E86;&#x4E24;&#x4E2A;&#x4E8B;&#x4EF6;&#xFF0C;&#x8BA9;<code>OnInspectorGUI</code>&#x591A;&#x7ED8;&#x5236;&#x4E86;&#x4E00;&#x6B21;&#x3002;</p>
<p><img src="img/EventType.png" alt="EventType"></p>
<p>&#x6211;&#x4EEC;&#x5148;&#x6765;&#x770B;&#x8FD9;&#x4E24;&#x4E2A;&#x4E8B;&#x4EF6;&#x662F;&#x4EC0;&#x4E48;&#xFF1A;</p>
<p><code>EventType.Layout</code> &#xFF1A;&#x8FD9;&#x4E2A;&#x4E8B;&#x4EF6;&#x4F1A;&#x5728;&#x5176;&#x4ED6;&#x4E8B;&#x4EF6;&#x4E4B;&#x524D;&#x53D1;&#x9001;&#xFF0C;&#x7528;&#x4E8E;&#x521D;&#x59CB;&#x5316;&#x3002;</p>
<p><code>EventType.Repaint</code>&#xFF1A;&#x8FD9;&#x4E2A;&#x4E8B;&#x4EF6;&#x7528;&#x4E8E;&#x91CD;&#x65B0;&#x7ED8;&#x5236;UI</p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x6211;&#x4EEC;<code>OnInspectorGUI</code>&#x7684;&#x7ED8;&#x5236;&#x5185;&#x5BB9;&#x5E94;&#x8BE5;&#x5728;<code>EventType.Repaint</code>&#x4E8B;&#x4EF6;&#x4E2D;&#x89E6;&#x53D1;&#x6267;&#x884C;&#xFF0C;&#x800C;&#x73B0;&#x5728;&#x660E;&#x663E;&#x591A;&#x505A;&#x4E86;&#x4E00;&#x6B21;&#x65E0;&#x6548;&#x64CD;&#x4F5C;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x5BF9;&#x5176;&#x505A;&#x5982;&#x4E0B;&#x4FEE;&#x6539;&#xFF1A;</p>
<pre class="language-"><code class="lang-csharp"><span class="token comment">// MyPlayerEditor.cs</span>
<span class="token punctuation">[</span><span class="token function">CustomEditor</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">MyPlayer</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyPlayerEditor</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Editor</span></span>
<span class="token punctuation">{</span> 
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnInspectorGUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//&#x67E5;&#x770B;&#x89E6;&#x53D1;&#x7ED8;&#x5236;&#x7684;&#x4E8B;&#x4EF6;&#x7C7B;&#x578B;</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>Event<span class="token punctuation">.</span>current<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Event<span class="token punctuation">.</span>current<span class="token punctuation">.</span>type <span class="token operator">==</span> EventType<span class="token punctuation">.</span>Repaint<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
              <span class="token comment">// target&#x6765;&#x81EA;&#x7236;&#x7C7B;Editor&#xFF0C;&#x6307;&#x660E;&#x5F53;&#x524D;&#x64CD;&#x4F5C;&#x7684;&#x5BF9;&#x8C61;</span>
            <span class="token class-name">MyPlayer</span> mp <span class="token operator">=</span> <span class="token punctuation">(</span>MyPlayer<span class="token punctuation">)</span>target<span class="token punctuation">;</span> 
            mp<span class="token punctuation">.</span>damage <span class="token operator">=</span> EditorGUILayout<span class="token punctuation">.</span><span class="token function">IntField</span><span class="token punctuation">(</span><span class="token string">&quot;Damage&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            mp<span class="token punctuation">.</span>armor <span class="token operator">=</span> EditorGUILayout<span class="token punctuation">.</span><span class="token function">IntSlider</span><span class="token punctuation">(</span><span class="token string">&quot;Armor&quot;</span><span class="token punctuation">,</span> mp<span class="token punctuation">.</span>armor<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            serializedObject<span class="token punctuation">.</span><span class="token function">ApplyModifiedProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x53E6;&#x5916;&#x63D0;&#x4E00;&#x4E0B;&#xFF1A;</p>
<p><code>EventType.Used</code>&#xFF1A;&#x4EE3;&#x8868;&#x5DF2;&#x7ECF;&#x5904;&#x7406;&#x7684;&#x4E8B;&#x4EF6;&#xFF0C;&#x5176;&#x4ED6;&#x63A7;&#x4EF6;&#x63A5;&#x6536;&#x5230;&#x5E94;&#x8BE5;&#x5FFD;&#x7565;&#x3002;&#x8BE5;&#x72B6;&#x6001;&#x7531;<code>Event.Use()</code>&#x8C03;&#x7528;&#x4FEE;&#x6539;&#xFF0C;&#x5728;&#x4F7F;&#x7528;&#x4E8B;&#x4EF6;&#x65F6;&#x8C03;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#x3002;&#x4E8B;&#x4EF6;&#x7684;&#x7C7B;&#x578B;&#x5C06;&#x91CD;&#x7F6E;&#x4E3A; <code>EventType.Used</code>&#xFF0C;&#x4F7F;&#x5176;&#x4ED6; GUI &#x5143;&#x7D20;&#x5FFD;&#x7565;&#x5B83;&#x3002;&#x5982;&#x679C;&#x5BF9;<code>EventType.Repaint</code> &#x548C; <code>EventType.Layout</code>&#x4F7F;&#x7528;&#x6B64;&#x65B9;&#x6CD5;&#xFF0C;&#x5C06;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#x3002;</p>
<h2 id="&#x8282;&#x70B9;&#x7F16;&#x8F91;&#x5668;&#xFF08;&#x5F85;&#x5B9A;&#xFF09;">&#x8282;&#x70B9;&#x7F16;&#x8F91;&#x5668;&#xFF08;&#x5F85;&#x5B9A;&#xFF09;</h2>
<h2 id="unity&#x4E2D;&#x7684;&#x8F85;&#x52A9;&#x7C7B;&#xFF08;&#x5F85;&#x5B9A;&#xFF09;">Unity&#x4E2D;&#x7684;&#x8F85;&#x52A9;&#x7C7B;&#xFF08;&#x5F85;&#x5B9A;&#xFF09;</h2>
<h2 id="&#x4F7F;&#x7528;uielement&#xFF08;&#x5F85;&#x5B9A;&#xFF09;">&#x4F7F;&#x7528;UIElement&#xFF08;&#x5F85;&#x5B9A;&#xFF09;</h2>
<h2 id="&#x9690;&#x85CF;&#x5728;unity&#x4E2D;&#x7684;&#x7C7B;">&#x9690;&#x85CF;&#x5728;Unity&#x4E2D;&#x7684;&#x7C7B;</h2>
<p>&#x7531;&#x4E8E;Unity&#x5F00;&#x653E;&#x4E86;&#x4E00;&#x4E9B;&#x91CD;&#x8981;&#x63A5;&#x53E3;&#xFF0C;&#x4F46;&#x5E76;&#x6CA1;&#x6709;&#x5728;&#x6587;&#x6863;&#x4E2D;&#x5199;&#x51FA;&#x6765;&#xFF0C;&#x5728;&#x6B64;&#x8BB0;&#x5F55;&#x3002;</p>
<h3 id="activeeditortracker">ActiveEditorTracker</h3>
<p>&#x83B7;&#x53D6;&#x6240;&#x6709;&#x6D3B;&#x8DC3;Editor&#x3002;</p>
<pre class="language-"><code class="lang-csharp"><span class="token comment">// &#x901A;&#x8FC7;object&#x67E5;&#x627E;&#x5BF9;&#x5E94;&#x7684;Editor</span>
<span class="token keyword">public</span> <span class="token return-type class-name">Editor</span> <span class="token function">FindEditorByTarget</span><span class="token punctuation">(</span><span class="token class-name">UnityEngine<span class="token punctuation">.</span>Object</span> target<span class="token punctuation">)</span>
    <span class="token class-name">Editor<span class="token punctuation">[</span><span class="token punctuation">]</span></span> editors <span class="token operator">=</span> ActiveEditorTracker<span class="token punctuation">.</span>sharedTracker<span class="token punctuation">.</span>activeEditors<span class="token punctuation">;</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> editor <span class="token keyword">in</span> editors<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>editor<span class="token punctuation">.</span>target <span class="token operator">==</span> target<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> editor<span class="token punctuation">;</span> 
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<footer class="page-footer"><span class="copyright">powered by Gitbook</span><span class="footer-modification">&#x8BE5;&#x6587;&#x4EF6;&#x4FEE;&#x8BA2;&#x65F6;&#x95F4;&#xFF1A;
2021-01-15 11:46:43
</span></footer>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: 前言">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="BOOK.html#ContextMenu特性" class="navigation navigation-next " aria-label="Next page: MenuItem 特性">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"自定义Menu菜单","level":"1.2","depth":1,"next":{"title":"MenuItem 特性","level":"1.2.1","depth":2,"anchor":"#ContextMenu特性","path":"BOOK.md","ref":"BOOK.md#ContextMenu特性","articles":[{"title":"ItemName  路径与快捷键","level":"1.2.1.1","depth":3,"anchor":"#ItemName路径与快捷键","path":"BOOK.md","ref":"BOOK.md#ItemName路径与快捷键","articles":[]},{"title":"IsValidateFunction 校验函数","level":"1.2.1.2","depth":3,"anchor":"#IsValidateFunction校验函数","path":"BOOK.md","ref":"BOOK.md#IsValidateFunction校验函数","articles":[]},{"title":"Priority 优先级","level":"1.2.1.3","depth":3,"anchor":"#Priority优先级","path":"BOOK.md","ref":"BOOK.md#Priority优先级","articles":[]},{"title":"特殊路径","level":"1.2.1.4","depth":3,"anchor":"#特殊路径","path":"BOOK.md","ref":"BOOK.md#特殊路径","articles":[]}]},"previous":{"title":"前言","level":"1.1","depth":1,"path":"README.md","ref":"README.md","articles":[]},"dir":"ltr"},"config":{"plugins":["prism","-highlight","expandable-chapters","pageview-count","tbfed-pagefooter","code","livereload"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"modify_label":"该文件修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"prism":{"css":["prismjs/themes/prism-solarizedlight.css"]},"livereload":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"code":{"copyButtons":true},"fontsettings":{"theme":"white","family":"sans","size":2},"pageview-count":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"expandable-chapters":{}},"theme":"default","author":"MMoZi","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Unity-Extension-Learn-Book","gitbook":"*","description":"Unity编辑器扩展"},"file":{"path":"BOOK.md","mtime":"2021-01-15T03:46:43.397Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-01-15T04:11:11.443Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

